{{if $.root.DiffNotAvailable}}
	<div class="diff-detail-box diff-box sticky">
		<div>
			<div>
				{{if $.root.PageIsPullFiles}}
					{{template "repo/diff/whitespace_dropdown" $.root}}
				{{else}}
					<a class="ui tiny basic toggle button" href="?style={{if $.root.IsSplitStyle}}unified{{else}}split{{end}}">{{ if $.root.IsSplitStyle }}{{$.root.i18n.Tr "repo.diff.show_unified_view"}}{{else}}{{$.root.i18n.Tr "repo.diff.show_split_view"}}{{end}}</a>
				{{end}}
				{{template "repo/diff/options_dropdown" $.root}}
				{{if and $.root.PageIsPullFiles $.SignedUserID (not $.root.IsArchived)}}
					{{template "repo/diff/new_review" $.root}}
				{{end}}
			</div>
		</div>
	</div>
	<h4>{{$.root.i18n.Tr "repo.diff.data_not_available"}}</h4>
{{else}}
	<div>
		<div class="diff-detail-box diff-box sticky">
			<div>
				{{svg "octicon-diff"}} {{$.root.i18n.Tr "repo.diff.stats_desc" .Diff.NumFiles .Diff.TotalAddition .Diff.TotalDeletion | Str2html}}
			</div>
			{{if $.AdditionalStickyMessage}}
				{{/*no short circuit for and in go templates*/}}
				{{if not (eq $.AdditionalStickyMessage "")}}
					<div class="additional-message">
						{{$.AdditionalStickyMessage}}
					</div>
				{{end}}
			{{end}}
			<div>
				{{if $.root.PageIsPullFiles}}
					{{template "repo/diff/revision_dropdown" $.root}}
					{{template "repo/diff/whitespace_dropdown" $.root}}
				{{else}}
					<a class="ui tiny basic toggle button" href="?style={{if $.root.IsSplitStyle}}unified{{else}}split{{end}}">{{ if $.root.IsSplitStyle }}{{$.root.i18n.Tr "repo.diff.show_unified_view"}}{{else}}{{$.root.i18n.Tr "repo.diff.show_split_view"}}{{end}}</a>
				{{end}}
				{{template "repo/diff/options_dropdown" $.root}}
				{{if and $.root.PageIsPullFiles $.SignedUserID (not $.root.IsArchived)}}
					{{template "repo/diff/new_review" $.root}}
				{{end}}
			</div>
		</div>

		{{template "repo/diff/box_diff_files" dict "root" $.root "Files" .Diff.Files "IsIncomplete" .Diff.IsIncomplete}}

		{{if not $.Repository.IsArchived}}
			<div id="pull_review_add_comment" class="hide">
				{{template "repo/diff/new_comment" dict "root" $.root}}
			</div>
			<div class="hide" id="edit-content-form">
				<div class="ui comment form">
					<div class="ui top attached tabular menu">
						<a class="active write item">{{$.root.i18n.Tr "write"}}</a>
						<a class="preview item" data-url="{{$.Repository.APIURL}}/markdown" data-context="{{$.RepoLink}}">{{$.root.i18n.Tr "preview"}}</a>
					</div>
					<div class="ui bottom attached active write tab segment">
						<textarea class="review-textarea" tabindex="1" name="content"></textarea>
					</div>
					<div class="ui bottom attached tab preview segment markdown">
					{{$.root.i18n.Tr "loading"}}
					</div>
					<div class="text right edit buttons">
						<div class="ui basic blue cancel button" tabindex="3">{{$.root.i18n.Tr "repo.issues.cancel"}}</div>
						<div class="ui green save button" tabindex="2">{{$.root.i18n.Tr "repo.issues.save"}}</div>
					</div>
				</div>
			</div>
		{{end}}

	</div>
{{end}}
