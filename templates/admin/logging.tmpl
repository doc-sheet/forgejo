{{template "base/head" .}}
<div class="page-content admin logging">
	{{template "admin/navbar" .}}
	<div class="ui container">
		{{template "base/alert" .}}
		<h4 class="ui top attached header">
			{{.i18n.Tr "admin.logging"}}
		</h4>
		<div class="ui attached table segment">
			<form method="post" action="{{AppSubUrl}}/admin">
				<table class="ui very basic striped table">
					<thead>
						<tr>
							<th></th>
							<th>{{.i18n.Tr "admin.logging.name"}}</th>
							<th>{{.i18n.Tr "admin.logging.subname"}}</th>
							<th>{{.i18n.Tr "admin.logging.mode"}}</th>
							<th>{{.i18n.Tr "admin.logging.level"}}</th>
						</tr>
					</thead>
					<tbody>
						{{range $name, $logger := .NamedLoggers}}
							{{range $subname, $sublogger := $logger.GetEventLoggers}}
								<tr>
									<td></td>
									<td>{{$name}}</td>
									<td>{{$subname}}</td>
									<td>{{$sublogger.GetProvider}}</td>
									<td>{{$sublogger.GetLevel}}</td>
									<td></td>
								</tr>
							{{end}}
						{{end}}
					</tbody>
				</table>
				<input type="hidden" name="from" value="monitor"/>
				{{.CsrfTokenHtml}}
			</form>
		</div>

		{{$messageLogs := .MessageLogs}}
		{{if $messageLogs}}
			<h4 class="ui top attached header">
				{{.i18n.Tr "admin.messagelogs"}}
			</h4>
			{{range $name, $log :=  $messageLogs}}
				<div class="ui attached table segment">
					<table class="ui very basic striped table">
						<tbody>
							{{range $log.GetHTML}}
								<tr>
									<td>{{. | Safe}}
								</tr>
							{{end}}
						</tbody>
					</table>
				</div>
			{{end}}
		{{end}}

	</div>
</div>
<div class="ui small basic delete modal">
	<div class="ui icon header">
		{{svg "octicon-x" 16 "close inside"}}
		{{.i18n.Tr "admin.monitor.process.cancel"}}
	</div>
	<div class="content">
		<p>{{$.i18n.Tr "admin.monitor.process.cancel_notices" `<span class="name"></span>` | Safe}}</p>
		<p>{{$.i18n.Tr "admin.monitor.process.cancel_desc"}}</p>
	</div>
	{{template "base/delete_modal_actions" .}}
</div>
{{template "base/footer" .}}
