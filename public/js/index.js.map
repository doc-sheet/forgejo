{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./web_src/js/index.js","webpack:///./web_src/js/draw.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","htmlEncode","text","jQuery","html","csrf","suburl","previewFileModes","simpleMDEditor","codeMirrorEditor","openedLists","listEopen","closeList","recursive_list","create_toc_inside","initCommentPreviewTab","$form","$tabMenu","find","tab","data","click","$this","$","this","post","_csrf","context","val","$previewPanel","emojify","run","each","hljs","highlightBlock","buttonsClickOnEnter","initEditForm","length","$previewTab","split","initEditPreviewTab","content","$diffPreviewPanel","updateIssuesMeta","url","action","issueIds","elementId","Promise","resolve","ajax","type","issue_ids","id","success","reload","window","location","initImagePaste","target","field","addEventListener","event","pasteEvent","callback","clipboardData","items","indexOf","blob","getAsFile","preventDefault","stopPropagation","retrieveImageFromClipboardAsBlob","img","substr","lastIndexOf","selectionStart","startPos","endPos","selectionEnd","substring","insertAtCursor","file","xhr","XMLHttpRequest","onload","status","responseText","open","setRequestHeader","formData","FormData","append","send","uploadFile","res","JSON","parse","oldval","newval","replace","replaceAndKeepCursor","uuid","input","initCommentForm","$selectBranch","selectedValue","css","removeClass","addClass","initListSubmits","selectItem","selector","outerSelector","$list","$noSelect","$listMenu","hasLabelUpdateAction","labels","dropdown","promises","keys","forEach","label","promise","push","all","then","hasClass","listIds","parent","join","select_id","input_id","$menu","hasUpdateAction","initRepository","$data","searchTerm","noResults","canCreateBranch","menuVisible","active","branch","tag","selected","remove","Vue","delimiters","el","beforeMount","vm","$el","getAttribute","document","body","contains","set","watch","visible","focusSearchField","computed","filteredItems","filter","item","toLowerCase","showCreateNewBranch","showNoResults","methods","prev","getSelected","href","createNewBranch","$refs","newBranchForm","submit","nextTick","searchField","focus","j","getSelectedIndexInFiltered","scrollToActive","Array","isArray","cont","scrollContainer","offsetTop","scrollTop","clientHeight","keydown","keyCode","initFilterSearchDropdown","keyup","$prompt","toString","show","hide","change","checked","$newLabelPanel","minicolors","color_hex","modal","onApprove","$datepicker","datetimepicker","lang","inline","timepicker","startDate","formatDate","onSelectDate","ct","dateFormat","$issueTitle","$editInput","editTitleToggle","toggle","title","$textarea","$segment","next","$editContentZone","$renderContent","$rawContent","issuesTribute","attach","emojiTribute","$dropzone","$files","filenameDict","dropzone","headers","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","dictInvalidFileType","dictFileTooBig","dictRemoveFile","init","on","submitted","getJSON","drop","removeAllFiles","empty","imgSrc","emit","files","$editContentForm","attr","$attachments","map","$content","attachments","confirm","$statusButton","$mergeButton","e","onChange","_text","_value","$choice","closest","initReactionSelector","reactions","popup","position","metadata","actionURL","done","resp","react","insertBefore","appendTo","hasEmoji","$item","addLine","delLine","addPercent","parseFloat","localStorage","setItem","select","$repoComparePull","$dropdown","fullTextSearch","selectOnKeydown","message","assingMenuAttributes","menu","Math","floor","random","initRepositoryCollaboration","uid","initEditor","prop","$editFilename","parts","$section","$divider","getCursorPosition","last","setSelectionRange","element","trigger","$editArea","markdownFileExts","lineWrapExtensions","spec","extension","extWithDot","dataUrl","apiCall","exec","info","CodeMirror","findModeByExtension","previewLink","mime","toTextArea","SimpleMDE","autoDownloadFontAwesome","forceSync","renderingConfig","singleLineBreaks","indentWithTabs","tabSize","spellChecker","previewRender","plainText","preview","setTimeout","innerHTML","toolbar","setSimpleMDE","fromTextArea","lineNumbers","cm","_change","getValue","setCodeMirror","setOption","autoLoadMode","editorconfig","indent_style","Tab","spaces","parseInt","getOption","replaceSelection","indent_size","tab_width","$commitButton","$editForm","areYouSure","silent","dirtyClass","fieldSelector","dirty","initUserSettings","keypress","initCodeView","$select","siblings","selectRange","shiftKey","eq","getSelection","removeAllRanges","selection","$first","hash","match","offset","top","$foldButton","slideUp","slideDown","insertBlobExcerpt","$blob","$row","replaceWith","u2fSigned","stringify","contentType","fail","u2fError","u2fRegistered","errorCode","checkError","errorType","u2fErrors","browser","1","2","3","4","5","u2fRegisterRequest","req","registeredKeys","u2fApi","register","appId","registerRequests","catch","reason","undefined","metaData","code","changeHash","history","pushState","$from","a","b","classes","showDeletePopup","dialog","closable","redirect","showAddAllPopup","Dropzone","autoDiscover","fn","pos","Sel","createRange","SelLength","moveStart","ready","onShow","transition","direction","accordion","checkbox","progress","showActivity","slideToggle","nodes","slice","querySelectorAll","setConfig","img_dir","ignore_emoticons","getElementsByClassName","childNodes","nodeName","$searchTeamBox","$searchRepoBox","toggleMigrations","isExpanded","mgrBtn","editDiv","viewDiv","saveBtn","topicDropdown","topicForm","topicPrompts","hidePrompt","prompts","clipboard","Clipboard","clearSelection","setAttribute","node","encodeURIComponent","wrap","children","dataset","issueIDs","issueId","_","first","search","minCharacters","apiSettings","onResponse","response","_i","login","full_name","image","avatar_url","results","searchFields","permission","description","dbType","dbDefaults","MySQL","PostgreSQL","MSSQL","_type","defaultHost","is","authUserName","cloneAddr","startsWith","sideBySideChanges","sideBySideTimeout","simplemde","render","clearTimeout","isSideBySideActive","codemirror","cursorPos","getCursor","setCursor","line","ch","className","getInputField","initWikiForm","updateContentType","initWebhook","removeAttr","authType","onOAuth2Change","onSecurityProtocolChange","onUsePagedSearchChange","onOAuth2UseCustomURLChange","$detailModal","$checkboxes","ids","provider","initAdmin","getElementById","component","props","searchLimit","Number","default","String","required","organizations","isOrganization","Boolean","canCreateOrganization","organizationsTotalCount","moreReposLink","repos","reposTotalCount","reposFilter","searchQuery","isLoading","repoTypes","count","searchMode","forks","mirrors","sources","collaborative","showMoreReposLink","searchURL","repoTypeCount","mounted","searchRepos","self","changeTab","changeReposFilter","showRepo","repo","owner","mirror","fork","searchedMode","searchedURL","searchedQuery","result","_textStatus","request","getResponseHeader","always","repoClass","private","querySelector","initVueApp","ctrlKey","altKey","metaKey","countPrompt","formatPrompt","topics","_data","responseJSON","topicArray","invalidTopics","topicLables","index","form","allowAdditions","forceSelection","fields","saveRemoteData","duration","variation","blue","basic","throttle","cache","formattedResponse","query","urlData","trim","found_query","current_topics","found","topic_name","unshift","sort","onLabelCreate","contents","onAdd","addedValue","_addedText","$addedChoice","settings","rules","validateTopic","_values","regExp","identifier","prompt","ensureSupport","sign","challenge","err","allowMultiple","repolink","repoId","crossRepoSearch","issueSearchUrl","filteredResponse","currIssueId","issue","number","repository","regStr","RegExp","selectedItems","initIssueList","toUpperCase","wipPrefixes","sticky","isSplit","side","idx","path","tr","ntr","after","td","commentCloud","initRepoStatusChecker","migrating","repo_name","complete","$repoTemplate","checkTemplate","$templateUnits","$nonTemplate","changeOwner","_r","initTemplateSearch","getItem","routes","$cloneAddr","$repoName","arrays","$title","timeAddManual","toggleStopwatch","cancelStopwatch","initHeatmap","appElementId","heatmapUser","locale","contributions","no_contributions","vueDelimeters","user","colorRange","endDate","values","totalContributions","getColor","Date","loadHeatmap","userName","chartRawData","chartData","date","timestamp","createElement","appendChild","color","getComputedStyle","backgroundColor","removeChild","template","toggleDeadlineForm","fadeToggle","setDeadline","deadline","updateDeadline","deadlineString","realDeadline","newDate","isNaN","due_date","error","deleteDependencyModal","cancelCodeComment","btn","onOAuthLoginClick","oauthLoader","oauthNav","out","min","pop","level","diff","rm","parentNode","ps","textContent","elms","tagName","innerText","toc","d2","firstChild","detect_toc_flag","graphList","gitGraph"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* globals wipPrefixes, issuesTribute, emojiTribute */\n/* exported timeAddManual, toggleStopwatch, cancelStopwatch, initHeatmap */\n/* exported toggleDeadlineForm, setDeadline, updateDeadline, deleteDependencyModal, cancelCodeComment, onOAuthLoginClick */\n\nfunction htmlEncode(text) {\n  return jQuery('<div />').text(text).html();\n}\n\nlet csrf;\nlet suburl;\nlet previewFileModes;\nlet simpleMDEditor;\nlet codeMirrorEditor;\n\n// Disable Dropzone auto-discover because it's manually initialized\nif (typeof (Dropzone) !== 'undefined') {\n  Dropzone.autoDiscover = false;\n}\n\nfunction initCommentPreviewTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('preview')}\"]`).click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      mode: 'gfm',\n      context: $this.data('context'),\n      text: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n    }, (data) => {\n      const $previewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('preview')}\"]`);\n      $previewPanel.html(data);\n      emojify.run($previewPanel[0]);\n      $('pre code', $previewPanel[0]).each(function () {\n        hljs.highlightBlock(this);\n      });\n    });\n  });\n\n  buttonsClickOnEnter();\n}\n\nfunction initEditPreviewTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  const $previewTab = $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('preview')}\"]`);\n  if ($previewTab.length) {\n    previewFileModes = $previewTab.data('preview-file-modes').split(',');\n    $previewTab.click(function () {\n      const $this = $(this);\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        mode: 'gfm',\n        context: $this.data('context'),\n        text: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n      }, (data) => {\n        const $previewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('preview')}\"]`);\n        $previewPanel.html(data);\n        emojify.run($previewPanel[0]);\n        $('pre code', $previewPanel[0]).each(function () {\n          hljs.highlightBlock(this);\n        });\n      });\n    });\n  }\n}\n\nfunction initEditDiffTab($form) {\n  const $tabMenu = $form.find('.tabular.menu');\n  $tabMenu.find('.item').tab();\n  $tabMenu.find(`.item[data-tab=\"${$tabMenu.data('diff')}\"]`).click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      context: $this.data('context'),\n      content: $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('write')}\"] textarea`).val()\n    }, (data) => {\n      const $diffPreviewPanel = $form.find(`.tab.segment[data-tab=\"${$tabMenu.data('diff')}\"]`);\n      $diffPreviewPanel.html(data);\n      emojify.run($diffPreviewPanel[0]);\n    });\n  });\n}\n\n\nfunction initEditForm() {\n  if ($('.edit.form').length === 0) {\n    return;\n  }\n\n  initEditPreviewTab($('.edit.form'));\n  initEditDiffTab($('.edit.form'));\n}\n\nfunction initBranchSelector() {\n  const $selectBranch = $('.ui.select-branch');\n  const $branchMenu = $selectBranch.find('.reference-list-menu');\n  $branchMenu.find('.item:not(.no-select)').click(function () {\n    const selectedValue = $(this).data('id');\n    $($(this).data('id-selector')).val(selectedValue);\n    $selectBranch.find('.ui .branch-name').text(selectedValue);\n  });\n  $selectBranch.find('.reference.column').click(function () {\n    $selectBranch.find('.scrolling.reference-list-menu').css('display', 'none');\n    $selectBranch.find('.reference .text').removeClass('black');\n    $($(this).data('target')).css('display', 'block');\n    $(this).find('.text').addClass('black');\n    return false;\n  });\n}\n\nfunction updateIssuesMeta(url, action, issueIds, elementId) {\n  return new Promise(((resolve) => {\n    $.ajax({\n      type: 'POST',\n      url,\n      data: {\n        _csrf: csrf,\n        action,\n        issue_ids: issueIds,\n        id: elementId\n      },\n      success: resolve\n    });\n  }));\n}\n\nfunction initRepoStatusChecker() {\n  const migrating = $('#repo_migrating');\n  $('#repo_migrating_failed').hide();\n  if (migrating) {\n    const repo_name = migrating.attr('repo');\n    if (typeof repo_name === 'undefined') {\n      return;\n    }\n    $.ajax({\n      type: 'GET',\n      url: `${suburl}/${repo_name}/status`,\n      data: {\n        _csrf: csrf,\n      },\n      complete(xhr) {\n        if (xhr.status === 200) {\n          if (xhr.responseJSON) {\n            if (xhr.responseJSON.status === 0) {\n              window.location.reload();\n              return;\n            }\n\n            setTimeout(() => {\n              initRepoStatusChecker();\n            }, 2000);\n            return;\n          }\n        }\n        $('#repo_migrating_progress').hide();\n        $('#repo_migrating_failed').show();\n      }\n    });\n  }\n}\n\nfunction initReactionSelector(parent) {\n  let reactions = '';\n  if (!parent) {\n    parent = $(document);\n    reactions = '.reactions > ';\n  }\n\n  parent.find(`${reactions}a.label`).popup({ position: 'bottom left', metadata: { content: 'title', title: 'none' } });\n\n  parent.find(`.select-reaction > .menu > .item, ${reactions}a.label`).on('click', function (e) {\n    const vm = this;\n    e.preventDefault();\n\n    if ($(this).hasClass('disabled')) return;\n\n    const actionURL = $(this).hasClass('item')\n      ? $(this).closest('.select-reaction').data('action-url')\n      : $(this).data('action-url');\n    const url = `${actionURL}/${$(this).hasClass('blue') ? 'unreact' : 'react'}`;\n    $.ajax({\n      type: 'POST',\n      url,\n      data: {\n        _csrf: csrf,\n        content: $(this).data('content')\n      }\n    }).done((resp) => {\n      if (resp && (resp.html || resp.empty)) {\n        const content = $(vm).closest('.content');\n        let react = content.find('.segment.reactions');\n        if (!resp.empty && react.length > 0) {\n          react.remove();\n        }\n        if (!resp.empty) {\n          react = $('<div class=\"ui attached segment reactions\"></div>');\n          const attachments = content.find('.segment.bottom:first');\n          if (attachments.length > 0) {\n            react.insertBefore(attachments);\n          } else {\n            react.appendTo(content);\n          }\n          react.html(resp.html);\n          const hasEmoji = react.find('.has-emoji');\n          for (let i = 0; i < hasEmoji.length; i++) {\n            emojify.run(hasEmoji.get(i));\n          }\n          react.find('.dropdown').dropdown();\n          initReactionSelector(react);\n        }\n      }\n    });\n  });\n}\n\nfunction insertAtCursor(field, value) {\n  if (field.selectionStart || field.selectionStart === 0) {\n    const startPos = field.selectionStart;\n    const endPos = field.selectionEnd;\n    field.value = field.value.substring(0, startPos)\n            + value\n            + field.value.substring(endPos, field.value.length);\n    field.selectionStart = startPos + value.length;\n    field.selectionEnd = startPos + value.length;\n  } else {\n    field.value += value;\n  }\n}\n\nfunction replaceAndKeepCursor(field, oldval, newval) {\n  if (field.selectionStart || field.selectionStart === 0) {\n    const startPos = field.selectionStart;\n    const endPos = field.selectionEnd;\n    field.value = field.value.replace(oldval, newval);\n    field.selectionStart = startPos + newval.length - oldval.length;\n    field.selectionEnd = endPos + newval.length - oldval.length;\n  } else {\n    field.value = field.value.replace(oldval, newval);\n  }\n}\n\nfunction retrieveImageFromClipboardAsBlob(pasteEvent, callback) {\n  if (!pasteEvent.clipboardData) {\n    return;\n  }\n\n  const { items } = pasteEvent.clipboardData;\n  if (typeof items === 'undefined') {\n    return;\n  }\n\n  for (let i = 0; i < items.length; i++) {\n    if (items[i].type.indexOf('image') === -1) continue;\n    const blob = items[i].getAsFile();\n\n    if (typeof (callback) === 'function') {\n      pasteEvent.preventDefault();\n      pasteEvent.stopPropagation();\n      callback(blob);\n    }\n  }\n}\n\nfunction uploadFile(file, callback) {\n  const xhr = new XMLHttpRequest();\n\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      callback(xhr.responseText);\n    }\n  };\n\n  xhr.open('post', `${suburl}/attachments`, true);\n  xhr.setRequestHeader('X-Csrf-Token', csrf);\n  const formData = new FormData();\n  formData.append('file', file, file.name);\n  xhr.send(formData);\n}\n\nfunction reload() {\n  window.location.reload();\n}\n\nfunction initImagePaste(target) {\n  target.each(function () {\n    const field = this;\n    field.addEventListener('paste', (event) => {\n      retrieveImageFromClipboardAsBlob(event, (img) => {\n        const name = img.name.substr(0, img.name.lastIndexOf('.'));\n        insertAtCursor(field, `![${name}]()`);\n        uploadFile(img, (res) => {\n          const data = JSON.parse(res);\n          replaceAndKeepCursor(field, `![${name}]()`, `![${name}](${suburl}/attachments/${data.uuid})`);\n          const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n          $('.files').append(input);\n        });\n      });\n    }, false);\n  });\n}\n\nfunction initCommentForm() {\n  if ($('.comment.form').length === 0) {\n    return;\n  }\n\n  initBranchSelector();\n  initCommentPreviewTab($('.comment.form'));\n  initImagePaste($('.comment.form textarea'));\n\n  // Listsubmit\n  function initListSubmits(selector, outerSelector) {\n    const $list = $(`.ui.${outerSelector}.list`);\n    const $noSelect = $list.find('.no-select');\n    const $listMenu = $(`.${selector} .menu`);\n    let hasLabelUpdateAction = $listMenu.data('action') === 'update';\n    const labels = {};\n\n    $(`.${selector}`).dropdown('setting', 'onHide', () => {\n      hasLabelUpdateAction = $listMenu.data('action') === 'update'; // Update the var\n      if (hasLabelUpdateAction) {\n        const promises = [];\n        Object.keys(labels).forEach((elementId) => {\n          const label = labels[elementId];\n          const promise = updateIssuesMeta(\n            label['update-url'],\n            label.action,\n            label['issue-id'],\n            elementId\n          );\n          promises.push(promise);\n        });\n        Promise.all(promises).then(reload);\n      }\n    });\n\n    $listMenu.find('.item:not(.no-select)').click(function () {\n      // we don't need the action attribute when updating assignees\n      if (selector === 'select-assignees-modify') {\n        // UI magic. We need to do this here, otherwise it would destroy the functionality of\n        // adding/removing labels\n        if ($(this).hasClass('checked')) {\n          $(this).removeClass('checked');\n          $(this).find('.octicon').removeClass('octicon-check');\n        } else {\n          $(this).addClass('checked');\n          $(this).find('.octicon').addClass('octicon-check');\n        }\n\n        updateIssuesMeta(\n          $listMenu.data('update-url'),\n          '',\n          $listMenu.data('issue-id'),\n          $(this).data('id')\n        );\n        $listMenu.data('action', 'update'); // Update to reload the page when we updated items\n        return false;\n      }\n\n      if ($(this).hasClass('checked')) {\n        $(this).removeClass('checked');\n        $(this).find('.octicon').removeClass('octicon-check');\n        if (hasLabelUpdateAction) {\n          if (!($(this).data('id') in labels)) {\n            labels[$(this).data('id')] = {\n              'update-url': $listMenu.data('update-url'),\n              action: 'detach',\n              'issue-id': $listMenu.data('issue-id'),\n            };\n          } else {\n            delete labels[$(this).data('id')];\n          }\n        }\n      } else {\n        $(this).addClass('checked');\n        $(this).find('.octicon').addClass('octicon-check');\n        if (hasLabelUpdateAction) {\n          if (!($(this).data('id') in labels)) {\n            labels[$(this).data('id')] = {\n              'update-url': $listMenu.data('update-url'),\n              action: 'attach',\n              'issue-id': $listMenu.data('issue-id'),\n            };\n          } else {\n            delete labels[$(this).data('id')];\n          }\n        }\n      }\n\n      const listIds = [];\n      $(this).parent().find('.item').each(function () {\n        if ($(this).hasClass('checked')) {\n          listIds.push($(this).data('id'));\n          $($(this).data('id-selector')).removeClass('hide');\n        } else {\n          $($(this).data('id-selector')).addClass('hide');\n        }\n      });\n      if (listIds.length === 0) {\n        $noSelect.removeClass('hide');\n      } else {\n        $noSelect.addClass('hide');\n      }\n      $($(this).parent().data('id')).val(listIds.join(','));\n      return false;\n    });\n    $listMenu.find('.no-select.item').click(function () {\n      if (hasLabelUpdateAction || selector === 'select-assignees-modify') {\n        updateIssuesMeta(\n          $listMenu.data('update-url'),\n          'clear',\n          $listMenu.data('issue-id'),\n          ''\n        ).then(reload);\n      }\n\n      $(this).parent().find('.item').each(function () {\n        $(this).removeClass('checked');\n        $(this).find('.octicon').removeClass('octicon-check');\n      });\n\n      $list.find('.item').each(function () {\n        $(this).addClass('hide');\n      });\n      $noSelect.removeClass('hide');\n      $($(this).parent().data('id')).val('');\n    });\n  }\n\n  // Init labels and assignees\n  initListSubmits('select-label', 'labels');\n  initListSubmits('select-assignees', 'assignees');\n  initListSubmits('select-assignees-modify', 'assignees');\n\n  function selectItem(select_id, input_id) {\n    const $menu = $(`${select_id} .menu`);\n    const $list = $(`.ui${select_id}.list`);\n    const hasUpdateAction = $menu.data('action') === 'update';\n\n    $menu.find('.item:not(.no-select)').click(function () {\n      $(this).parent().find('.item').each(function () {\n        $(this).removeClass('selected active');\n      });\n\n      $(this).addClass('selected active');\n      if (hasUpdateAction) {\n        updateIssuesMeta(\n          $menu.data('update-url'),\n          '',\n          $menu.data('issue-id'),\n          $(this).data('id')\n        ).then(reload);\n      }\n      switch (input_id) {\n        case '#milestone_id':\n          $list.find('.selected').html(`<a class=\"item\" href=${$(this).data('href')}>${\n            htmlEncode($(this).text())}</a>`);\n          break;\n        case '#assignee_id':\n          $list.find('.selected').html(`<a class=\"item\" href=${$(this).data('href')}>`\n                        + `<img class=\"ui avatar image\" src=${$(this).data('avatar')}>${\n                          htmlEncode($(this).text())}</a>`);\n      }\n      $(`.ui${select_id}.list .no-select`).addClass('hide');\n      $(input_id).val($(this).data('id'));\n    });\n    $menu.find('.no-select.item').click(function () {\n      $(this).parent().find('.item:not(.no-select)').each(function () {\n        $(this).removeClass('selected active');\n      });\n\n      if (hasUpdateAction) {\n        updateIssuesMeta(\n          $menu.data('update-url'),\n          '',\n          $menu.data('issue-id'),\n          $(this).data('id')\n        ).then(reload);\n      }\n\n      $list.find('.selected').html('');\n      $list.find('.no-select').removeClass('hide');\n      $(input_id).val('');\n    });\n  }\n\n  // Milestone and assignee\n  selectItem('.select-milestone', '#milestone_id');\n  selectItem('.select-assignee', '#assignee_id');\n}\n\nfunction initInstall() {\n  if ($('.install').length === 0) {\n    return;\n  }\n\n  if ($('#db_host').val() === '') {\n    $('#db_host').val('127.0.0.1:3306');\n    $('#db_user').val('gitea');\n    $('#db_name').val('gitea');\n  }\n\n  // Database type change detection.\n  $('#db_type').change(function () {\n    const sqliteDefault = 'data/gitea.db';\n    const tidbDefault = 'data/gitea_tidb';\n\n    const dbType = $(this).val();\n    if (dbType === 'SQLite3') {\n      $('#sql_settings').hide();\n      $('#pgsql_settings').hide();\n      $('#mysql_settings').hide();\n      $('#sqlite_settings').show();\n\n      if (dbType === 'SQLite3' && $('#db_path').val() === tidbDefault) {\n        $('#db_path').val(sqliteDefault);\n      }\n      return;\n    }\n\n    const dbDefaults = {\n      MySQL: '127.0.0.1:3306',\n      PostgreSQL: '127.0.0.1:5432',\n      MSSQL: '127.0.0.1:1433'\n    };\n\n    $('#sqlite_settings').hide();\n    $('#sql_settings').show();\n\n    $('#pgsql_settings').toggle(dbType === 'PostgreSQL');\n    $('#mysql_settings').toggle(dbType === 'MySQL');\n    $.each(dbDefaults, (_type, defaultHost) => {\n      if ($('#db_host').val() === defaultHost) {\n        $('#db_host').val(dbDefaults[dbType]);\n        return false;\n      }\n    });\n  });\n\n  // TODO: better handling of exclusive relations.\n  $('#offline-mode input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-gravatar').checkbox('check');\n      $('#federated-avatar-lookup').checkbox('uncheck');\n    }\n  });\n  $('#disable-gravatar input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#federated-avatar-lookup').checkbox('uncheck');\n    } else {\n      $('#offline-mode').checkbox('uncheck');\n    }\n  });\n  $('#federated-avatar-lookup input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-gravatar').checkbox('uncheck');\n      $('#offline-mode').checkbox('uncheck');\n    }\n  });\n  $('#enable-openid-signin input').change(function () {\n    if ($(this).is(':checked')) {\n      if (!$('#disable-registration input').is(':checked')) {\n        $('#enable-openid-signup').checkbox('check');\n      }\n    } else {\n      $('#enable-openid-signup').checkbox('uncheck');\n    }\n  });\n  $('#disable-registration input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#enable-captcha').checkbox('uncheck');\n      $('#enable-openid-signup').checkbox('uncheck');\n    } else {\n      $('#enable-openid-signup').checkbox('check');\n    }\n  });\n  $('#enable-captcha input').change(function () {\n    if ($(this).is(':checked')) {\n      $('#disable-registration').checkbox('uncheck');\n    }\n  });\n}\n\nfunction initRepository() {\n  if ($('.repository').length === 0) {\n    return;\n  }\n\n  function initFilterSearchDropdown(selector) {\n    const $dropdown = $(selector);\n    $dropdown.dropdown({\n      fullTextSearch: true,\n      selectOnKeydown: false,\n      onChange(_text, _value, $choice) {\n        if ($choice.data('url')) {\n          window.location.href = $choice.data('url');\n        }\n      },\n      message: { noResults: $dropdown.data('no-results') }\n    });\n  }\n\n  // File list and commits\n  if ($('.repository.file.list').length > 0 || ('.repository.commits').length > 0) {\n    initFilterBranchTagDropdown('.choose.reference .dropdown');\n  }\n\n  // Wiki\n  if ($('.repository.wiki.view').length > 0) {\n    initFilterSearchDropdown('.choose.page .dropdown');\n  }\n\n  // Options\n  if ($('.repository.settings.options').length > 0) {\n    $('#repo_name').keyup(function () {\n      const $prompt = $('#repo-name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n\n    // Enable or select internal/external wiki system and issue tracker.\n    $('.enable-system').change(function () {\n      if (this.checked) {\n        $($(this).data('target')).removeClass('disabled');\n        if (!$(this).data('context')) $($(this).data('context')).addClass('disabled');\n      } else {\n        $($(this).data('target')).addClass('disabled');\n        if (!$(this).data('context')) $($(this).data('context')).removeClass('disabled');\n      }\n    });\n    $('.enable-system-radio').change(function () {\n      if (this.value === 'false') {\n        $($(this).data('target')).addClass('disabled');\n        if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).removeClass('disabled');\n      } else if (this.value === 'true') {\n        $($(this).data('target')).removeClass('disabled');\n        if (typeof $(this).data('context') !== 'undefined') $($(this).data('context')).addClass('disabled');\n      }\n    });\n  }\n\n  // Labels\n  if ($('.repository.labels').length > 0) {\n    // Create label\n    const $newLabelPanel = $('.new-label.segment');\n    $('.new-label.button').click(() => {\n      $newLabelPanel.show();\n    });\n    $('.new-label.segment .cancel').click(() => {\n      $newLabelPanel.hide();\n    });\n\n    $('.color-picker').each(function () {\n      $(this).minicolors();\n    });\n    $('.precolors .color').click(function () {\n      const color_hex = $(this).data('color-hex');\n      $('.color-picker').val(color_hex);\n      $('.minicolors-swatch-color').css('background-color', color_hex);\n    });\n    $('.edit-label-button').click(function () {\n      $('#label-modal-id').val($(this).data('id'));\n      $('.edit-label .new-label-input').val($(this).data('title'));\n      $('.edit-label .new-label-desc-input').val($(this).data('description'));\n      $('.edit-label .color-picker').val($(this).data('color'));\n      $('.minicolors-swatch-color').css('background-color', $(this).data('color'));\n      $('.edit-label.modal').modal({\n        onApprove() {\n          $('.edit-label.form').submit();\n        }\n      }).modal('show');\n      return false;\n    });\n  }\n\n  // Milestones\n  if ($('.repository.new.milestone').length > 0) {\n    const $datepicker = $('.milestone.datepicker');\n    $datepicker.datetimepicker({\n      lang: $datepicker.data('lang'),\n      inline: true,\n      timepicker: false,\n      startDate: $datepicker.data('start-date'),\n      formatDate: 'Y-m-d',\n      onSelectDate(ct) {\n        $('#deadline').val(ct.dateFormat('Y-m-d'));\n      }\n    });\n    $('#clear-date').click(() => {\n      $('#deadline').val('');\n      return false;\n    });\n  }\n\n  // Issues\n  if ($('.repository.view.issue').length > 0) {\n    // Edit issue title\n    const $issueTitle = $('#issue-title');\n    const $editInput = $('#edit-title-input input');\n    const editTitleToggle = function () {\n      $issueTitle.toggle();\n      $('.not-in-edit').toggle();\n      $('#edit-title-input').toggle();\n      $('.in-edit').toggle();\n      $editInput.focus();\n      return false;\n    };\n    $('#edit-title').click(editTitleToggle);\n    $('#cancel-edit-title').click(editTitleToggle);\n    $('#save-edit-title').click(editTitleToggle).click(function () {\n      if ($editInput.val().length === 0 || $editInput.val() === $issueTitle.text()) {\n        $editInput.val($issueTitle.text());\n        return false;\n      }\n\n      $.post($(this).data('update-url'), {\n        _csrf: csrf,\n        title: $editInput.val()\n      },\n      (data) => {\n        $editInput.val(data.title);\n        $issueTitle.text(data.title);\n        reload();\n      });\n      return false;\n    });\n\n    // Edit issue or comment content\n    $('.edit-content').click(function () {\n      const $segment = $(this).parent().parent().parent()\n        .next();\n      const $editContentZone = $segment.find('.edit-content-zone');\n      const $renderContent = $segment.find('.render-content');\n      const $rawContent = $segment.find('.raw-content');\n      let $textarea;\n\n      // Setup new form\n      if ($editContentZone.html().length === 0) {\n        $editContentZone.html($('#edit-content-form').html());\n        $textarea = $editContentZone.find('textarea');\n        issuesTribute.attach($textarea.get());\n        emojiTribute.attach($textarea.get());\n\n        const $dropzone = $editContentZone.find('.dropzone');\n        $dropzone.data('saved', false);\n        const $files = $editContentZone.find('.comment-files');\n        if ($dropzone.length > 0) {\n          const filenameDict = {};\n          $dropzone.dropzone({\n            url: $dropzone.data('upload-url'),\n            headers: { 'X-Csrf-Token': csrf },\n            maxFiles: $dropzone.data('max-file'),\n            maxFilesize: $dropzone.data('max-size'),\n            acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n            addRemoveLinks: true,\n            dictDefaultMessage: $dropzone.data('default-message'),\n            dictInvalidFileType: $dropzone.data('invalid-input-type'),\n            dictFileTooBig: $dropzone.data('file-too-big'),\n            dictRemoveFile: $dropzone.data('remove-file'),\n            init() {\n              this.on('success', (file, data) => {\n                filenameDict[file.name] = {\n                  uuid: data.uuid,\n                  submitted: false\n                };\n                const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n                $files.append(input);\n              });\n              this.on('removedfile', (file) => {\n                if (!(file.name in filenameDict)) {\n                  return;\n                }\n                $(`#${filenameDict[file.name].uuid}`).remove();\n                if ($dropzone.data('remove-url') && $dropzone.data('csrf') && !filenameDict[file.name].submitted) {\n                  $.post($dropzone.data('remove-url'), {\n                    file: filenameDict[file.name].uuid,\n                    _csrf: $dropzone.data('csrf')\n                  });\n                }\n              });\n              this.on('submit', () => {\n                $.each(filenameDict, (name) => {\n                  filenameDict[name].submitted = true;\n                });\n              });\n              this.on('reload', () => {\n                $.getJSON($editContentZone.data('attachment-url'), (data) => {\n                  const drop = $dropzone.get(0).dropzone;\n                  drop.removeAllFiles(true);\n                  $files.empty();\n                  $.each(data, function () {\n                    const imgSrc = `${$dropzone.data('upload-url')}/${this.uuid}`;\n                    drop.emit('addedfile', this);\n                    drop.emit('thumbnail', this, imgSrc);\n                    drop.emit('complete', this);\n                    drop.files.push(this);\n                    filenameDict[this.name] = {\n                      submitted: true,\n                      uuid: this.uuid\n                    };\n                    $dropzone.find(`img[src='${imgSrc}']`).css('max-width', '100%');\n                    const input = $(`<input id=\"${this.uuid}\" name=\"files\" type=\"hidden\">`).val(this.uuid);\n                    $files.append(input);\n                  });\n                });\n              });\n            }\n          });\n          $dropzone.get(0).dropzone.emit('reload');\n        }\n        // Give new write/preview data-tab name to distinguish from others\n        const $editContentForm = $editContentZone.find('.ui.comment.form');\n        const $tabMenu = $editContentForm.find('.tabular.menu');\n        $tabMenu.attr('data-write', $editContentZone.data('write'));\n        $tabMenu.attr('data-preview', $editContentZone.data('preview'));\n        $tabMenu.find('.write.item').attr('data-tab', $editContentZone.data('write'));\n        $tabMenu.find('.preview.item').attr('data-tab', $editContentZone.data('preview'));\n        $editContentForm.find('.write.segment').attr('data-tab', $editContentZone.data('write'));\n        $editContentForm.find('.preview.segment').attr('data-tab', $editContentZone.data('preview'));\n\n        initCommentPreviewTab($editContentForm);\n\n        $editContentZone.find('.cancel.button').click(() => {\n          $renderContent.show();\n          $editContentZone.hide();\n          $dropzone.get(0).dropzone.emit('reload');\n        });\n        $editContentZone.find('.save.button').click(() => {\n          $renderContent.show();\n          $editContentZone.hide();\n          const $attachments = $files.find('[name=files]').map(function () {\n            return $(this).val();\n          }).get();\n          $.post($editContentZone.data('update-url'), {\n            _csrf: csrf,\n            content: $textarea.val(),\n            context: $editContentZone.data('context'),\n            files: $attachments\n          }, (data) => {\n            if (data.length === 0) {\n              $renderContent.html($('#no-content').html());\n            } else {\n              $renderContent.html(data.content);\n              emojify.run($renderContent[0]);\n              $('pre code', $renderContent[0]).each(function () {\n                hljs.highlightBlock(this);\n              });\n            }\n            const $content = $segment.parent();\n            if (!$content.find('.ui.small.images').length) {\n              if (data.attachments !== '') {\n                $content.append(\n                  '<div class=\"ui bottom attached segment\"><div class=\"ui small images\"></div></div>'\n                );\n                $content.find('.ui.small.images').html(data.attachments);\n              }\n            } else if (data.attachments === '') {\n              $content.find('.ui.small.images').parent().remove();\n            } else {\n              $content.find('.ui.small.images').html(data.attachments);\n            }\n            $dropzone.get(0).dropzone.emit('submit');\n            $dropzone.get(0).dropzone.emit('reload');\n          });\n        });\n      } else {\n        $textarea = $segment.find('textarea');\n      }\n\n      // Show write/preview tab and copy raw content as needed\n      $editContentZone.show();\n      $renderContent.hide();\n      if ($textarea.val().length === 0) {\n        $textarea.val($rawContent.text());\n      }\n      $textarea.focus();\n      return false;\n    });\n\n    // Delete comment\n    $('.delete-comment').click(function () {\n      const $this = $(this);\n      if (window.confirm($this.data('locale'))) {\n        $.post($this.data('url'), {\n          _csrf: csrf\n        }).success(() => {\n          $(`#${$this.data('comment-id')}`).remove();\n        });\n      }\n      return false;\n    });\n\n    // Change status\n    const $statusButton = $('#status-button');\n    $('#comment-form .edit_area').keyup(function () {\n      if ($(this).val().length === 0) {\n        $statusButton.text($statusButton.data('status'));\n      } else {\n        $statusButton.text($statusButton.data('status-and-comment'));\n      }\n    });\n    $statusButton.click(() => {\n      $('#status').val($statusButton.data('status-val'));\n      $('#comment-form').submit();\n    });\n\n    // Pull Request merge button\n    const $mergeButton = $('.merge-button > button');\n    $mergeButton.on('click', function (e) {\n      e.preventDefault();\n      $(`.${$(this).data('do')}-fields`).show();\n      $(this).parent().hide();\n    });\n    $('.merge-button > .dropdown').dropdown({\n      onChange(_text, _value, $choice) {\n        if ($choice.data('do')) {\n          $mergeButton.find('.button-text').text($choice.text());\n          $mergeButton.data('do', $choice.data('do'));\n        }\n      }\n    });\n    $('.merge-cancel').on('click', function (e) {\n      e.preventDefault();\n      $(this).closest('.form').hide();\n      $mergeButton.parent().show();\n    });\n\n    initReactionSelector();\n  }\n\n  // Diff\n  if ($('.repository.diff').length > 0) {\n    $('.diff-counter').each(function () {\n      const $item = $(this);\n      const addLine = $item.find('span[data-line].add').data('line');\n      const delLine = $item.find('span[data-line].del').data('line');\n      const addPercent = parseFloat(addLine) / (parseFloat(addLine) + parseFloat(delLine)) * 100;\n      $item.find('.bar .add').css('width', `${addPercent}%`);\n    });\n  }\n\n  // Quick start and repository home\n  $('#repo-clone-ssh').click(function () {\n    $('.clone-url').text($(this).data('link'));\n    $('#repo-clone-url').val($(this).data('link'));\n    $(this).addClass('blue');\n    $('#repo-clone-https').removeClass('blue');\n    localStorage.setItem('repo-clone-protocol', 'ssh');\n  });\n  $('#repo-clone-https').click(function () {\n    $('.clone-url').text($(this).data('link'));\n    $('#repo-clone-url').val($(this).data('link'));\n    $(this).addClass('blue');\n    $('#repo-clone-ssh').removeClass('blue');\n    localStorage.setItem('repo-clone-protocol', 'https');\n  });\n  $('#repo-clone-url').click(function () {\n    $(this).select();\n  });\n\n  // Pull request\n  const $repoComparePull = $('.repository.compare.pull');\n  if ($repoComparePull.length > 0) {\n    initFilterSearchDropdown('.choose.branch .dropdown');\n    // show pull request form\n    $repoComparePull.find('button.show-form').on('click', function (e) {\n      e.preventDefault();\n      $repoComparePull.find('.pullrequest-form').show();\n      $(this).parent().hide();\n    });\n  }\n\n  // Branches\n  if ($('.repository.settings.branches').length > 0) {\n    initFilterSearchDropdown('.protected-branches .dropdown');\n    $('.enable-protection, .enable-whitelist').change(function () {\n      if (this.checked) {\n        $($(this).data('target')).removeClass('disabled');\n      } else {\n        $($(this).data('target')).addClass('disabled');\n      }\n    });\n  }\n}\n\nfunction initMigration() {\n  const toggleMigrations = function () {\n    const authUserName = $('#auth_username').val();\n    const cloneAddr = $('#clone_addr').val();\n    if (!$('#mirror').is(':checked') && (authUserName && authUserName.length > 0)\n        && (cloneAddr !== undefined && (cloneAddr.startsWith('https://github.com') || cloneAddr.startsWith('http://github.com')))) {\n      $('#migrate_items').show();\n    } else {\n      $('#migrate_items').hide();\n    }\n  };\n\n  toggleMigrations();\n\n  $('#clone_addr').on('input', toggleMigrations);\n  $('#auth_username').on('input', toggleMigrations);\n  $('#mirror').on('change', toggleMigrations);\n}\n\nfunction initPullRequestReview() {\n  $('.show-outdated').on('click', function (e) {\n    e.preventDefault();\n    const id = $(this).data('comment');\n    $(this).addClass('hide');\n    $(`#code-comments-${id}`).removeClass('hide');\n    $(`#code-preview-${id}`).removeClass('hide');\n    $(`#hide-outdated-${id}`).removeClass('hide');\n  });\n\n  $('.hide-outdated').on('click', function (e) {\n    e.preventDefault();\n    const id = $(this).data('comment');\n    $(this).addClass('hide');\n    $(`#code-comments-${id}`).addClass('hide');\n    $(`#code-preview-${id}`).addClass('hide');\n    $(`#show-outdated-${id}`).removeClass('hide');\n  });\n\n  $('button.comment-form-reply').on('click', function (e) {\n    e.preventDefault();\n    $(this).hide();\n    const form = $(this).parent().find('.comment-form');\n    form.removeClass('hide');\n    assingMenuAttributes(form.find('.menu'));\n  });\n  // The following part is only for diff views\n  if ($('.repository.pull.diff').length === 0) {\n    return;\n  }\n\n  $('.diff-detail-box.ui.sticky').sticky();\n\n  $('.btn-review').on('click', function (e) {\n    e.preventDefault();\n    $(this).closest('.dropdown').find('.menu').toggle('visible');\n  }).closest('.dropdown').find('.link.close')\n    .on('click', function (e) {\n      e.preventDefault();\n      $(this).closest('.menu').toggle('visible');\n    });\n\n  $('.code-view .lines-code,.code-view .lines-num')\n    .on('mouseenter', function () {\n      const parent = $(this).closest('td');\n      $(this).closest('tr').addClass(\n        parent.hasClass('lines-num-old') || parent.hasClass('lines-code-old')\n          ? 'focus-lines-old' : 'focus-lines-new'\n      );\n    })\n    .on('mouseleave', function () {\n      $(this).closest('tr').removeClass('focus-lines-new focus-lines-old');\n    });\n  $('.add-code-comment').on('click', function (e) {\n    // https://github.com/go-gitea/gitea/issues/4745\n    if ($(e.target).hasClass('btn-add-single')) {\n      return;\n    }\n    e.preventDefault();\n    const isSplit = $(this).closest('.code-diff').hasClass('code-diff-split');\n    const side = $(this).data('side');\n    const idx = $(this).data('idx');\n    const path = $(this).data('path');\n    const form = $('#pull_review_add_comment').html();\n    const tr = $(this).closest('tr');\n    let ntr = tr.next();\n    if (!ntr.hasClass('add-comment')) {\n      ntr = $(`<tr class=\"add-comment\">${\n        isSplit ? '<td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-right\"></td>'\n          : '<td class=\"lines-num\"></td><td class=\"lines-num\"></td><td class=\"lines-type-marker\"></td><td class=\"add-comment-left add-comment-right\"></td>'\n      }</tr>`);\n      tr.after(ntr);\n    }\n    const td = ntr.find(`.add-comment-${side}`);\n    let commentCloud = td.find('.comment-code-cloud');\n    if (commentCloud.length === 0) {\n      td.html(form);\n      commentCloud = td.find('.comment-code-cloud');\n      assingMenuAttributes(commentCloud.find('.menu'));\n\n      td.find(\"input[name='line']\").val(idx);\n      td.find(\"input[name='side']\").val(side === 'left' ? 'previous' : 'proposed');\n      td.find(\"input[name='path']\").val(path);\n    }\n    commentCloud.find('textarea').focus();\n  });\n}\n\nfunction assingMenuAttributes(menu) {\n  const id = Math.floor(Math.random() * Math.floor(1000000));\n  menu.attr('data-write', menu.attr('data-write') + id);\n  menu.attr('data-preview', menu.attr('data-preview') + id);\n  menu.find('.item').each(function () {\n    const tab = $(this).attr('data-tab') + id;\n    $(this).attr('data-tab', tab);\n  });\n  menu.parent().find(\"*[data-tab='write']\").attr('data-tab', `write${id}`);\n  menu.parent().find(\"*[data-tab='preview']\").attr('data-tab', `preview${id}`);\n  initCommentPreviewTab(menu.parent('.form'));\n  return id;\n}\n\nfunction initRepositoryCollaboration() {\n  // Change collaborator access mode\n  $('.access-mode.menu .item').click(function () {\n    const $menu = $(this).parent();\n    $.post($menu.data('url'), {\n      _csrf: csrf,\n      uid: $menu.data('uid'),\n      mode: $(this).data('value')\n    });\n  });\n}\n\nfunction initTeamSettings() {\n  // Change team access mode\n  $('.organization.new.team input[name=permission]').change(() => {\n    const val = $('input[name=permission]:checked', '.organization.new.team').val();\n    if (val === 'admin') {\n      $('.organization.new.team .team-units').hide();\n    } else {\n      $('.organization.new.team .team-units').show();\n    }\n  });\n}\n\nfunction initWikiForm() {\n  const $editArea = $('.repository.wiki textarea#edit_area');\n  let sideBySideChanges = 0;\n  let sideBySideTimeout = null;\n  if ($editArea.length > 0) {\n    const simplemde = new SimpleMDE({\n      autoDownloadFontAwesome: false,\n      element: $editArea[0],\n      forceSync: true,\n      previewRender(plainText, preview) { // Async method\n        setTimeout(() => {\n          // FIXME: still send render request when return back to edit mode\n          const render = function () {\n            sideBySideChanges = 0;\n            if (sideBySideTimeout != null) {\n              clearTimeout(sideBySideTimeout);\n              sideBySideTimeout = null;\n            }\n            $.post($editArea.data('url'), {\n              _csrf: csrf,\n              mode: 'gfm',\n              context: $editArea.data('context'),\n              text: plainText\n            },\n            (data) => {\n              preview.innerHTML = `<div class=\"markdown ui segment\">${data}</div>`;\n              emojify.run($('.editor-preview')[0]);\n              $(preview).find('pre code').each((_, e) => {\n                hljs.highlightBlock(e);\n              });\n            });\n          };\n          if (!simplemde.isSideBySideActive()) {\n            render();\n          } else {\n            // delay preview by keystroke counting\n            sideBySideChanges++;\n            if (sideBySideChanges > 10) {\n              render();\n            }\n            // or delay preview by timeout\n            if (sideBySideTimeout != null) {\n              clearTimeout(sideBySideTimeout);\n              sideBySideTimeout = null;\n            }\n            sideBySideTimeout = setTimeout(render, 600);\n          }\n        }, 0);\n        if (!simplemde.isSideBySideActive()) {\n          return 'Loading...';\n        }\n        return preview.innerHTML;\n      },\n      renderingConfig: {\n        singleLineBreaks: false\n      },\n      indentWithTabs: false,\n      tabSize: 4,\n      spellChecker: false,\n      toolbar: ['bold', 'italic', 'strikethrough', '|',\n        'heading-1', 'heading-2', 'heading-3', 'heading-bigger', 'heading-smaller', '|',\n        {\n          name: 'code-inline',\n          action(e) {\n            const cm = e.codemirror;\n            const selection = cm.getSelection();\n            cm.replaceSelection(`\\`${selection}\\``);\n            if (!selection) {\n              const cursorPos = cm.getCursor();\n              cm.setCursor(cursorPos.line, cursorPos.ch - 1);\n            }\n            cm.focus();\n          },\n          className: 'fa fa-angle-right',\n          title: 'Add Inline Code',\n        }, 'code', 'quote', '|', {\n          name: 'checkbox-empty',\n          action(e) {\n            const cm = e.codemirror;\n            cm.replaceSelection(`\\n- [ ] ${cm.getSelection()}`);\n            cm.focus();\n          },\n          className: 'fa fa-square-o',\n          title: 'Add Checkbox (empty)',\n        },\n        {\n          name: 'checkbox-checked',\n          action(e) {\n            const cm = e.codemirror;\n            cm.replaceSelection(`\\n- [x] ${cm.getSelection()}`);\n            cm.focus();\n          },\n          className: 'fa fa-check-square-o',\n          title: 'Add Checkbox (checked)',\n        }, '|',\n        'unordered-list', 'ordered-list', '|',\n        'link', 'image', 'table', 'horizontal-rule', '|',\n        'clean-block', 'preview', 'fullscreen', 'side-by-side']\n    });\n    $(simplemde.codemirror.getInputField()).addClass('js-quick-submit');\n  }\n}\n\n// Adding function to get the cursor position in a text field to jQuery object.\n$.fn.getCursorPosition = function () {\n  const el = $(this).get(0);\n  let pos = 0;\n  if ('selectionStart' in el) {\n    pos = el.selectionStart;\n  } else if ('selection' in document) {\n    el.focus();\n    const Sel = document.selection.createRange();\n    const SelLength = document.selection.createRange().text.length;\n    Sel.moveStart('character', -el.value.length);\n    pos = Sel.text.length - SelLength;\n  }\n  return pos;\n};\n\nfunction setSimpleMDE($editArea) {\n  if (codeMirrorEditor) {\n    codeMirrorEditor.toTextArea();\n    codeMirrorEditor = null;\n  }\n\n  if (simpleMDEditor) {\n    return true;\n  }\n\n  simpleMDEditor = new SimpleMDE({\n    autoDownloadFontAwesome: false,\n    element: $editArea[0],\n    forceSync: true,\n    renderingConfig: {\n      singleLineBreaks: false\n    },\n    indentWithTabs: false,\n    tabSize: 4,\n    spellChecker: false,\n    previewRender(plainText, preview) { // Async method\n      setTimeout(() => {\n        // FIXME: still send render request when return back to edit mode\n        $.post($editArea.data('url'), {\n          _csrf: csrf,\n          mode: 'gfm',\n          context: $editArea.data('context'),\n          text: plainText\n        },\n        (data) => {\n          preview.innerHTML = `<div class=\"markdown ui segment\">${data}</div>`;\n          emojify.run($('.editor-preview')[0]);\n        });\n      }, 0);\n\n      return 'Loading...';\n    },\n    toolbar: ['bold', 'italic', 'strikethrough', '|',\n      'heading-1', 'heading-2', 'heading-3', 'heading-bigger', 'heading-smaller', '|',\n      'code', 'quote', '|',\n      'unordered-list', 'ordered-list', '|',\n      'link', 'image', 'table', 'horizontal-rule', '|',\n      'clean-block', 'preview', 'fullscreen', 'side-by-side']\n  });\n\n  return true;\n}\n\nfunction setCodeMirror($editArea) {\n  if (simpleMDEditor) {\n    simpleMDEditor.toTextArea();\n    simpleMDEditor = null;\n  }\n\n  if (codeMirrorEditor) {\n    return true;\n  }\n\n  codeMirrorEditor = CodeMirror.fromTextArea($editArea[0], {\n    lineNumbers: true\n  });\n  codeMirrorEditor.on('change', (cm, _change) => {\n    $editArea.val(cm.getValue());\n  });\n\n  return true;\n}\n\nfunction initEditor() {\n  $('.js-quick-pull-choice-option').change(function () {\n    if ($(this).val() === 'commit-to-new-branch') {\n      $('.quick-pull-branch-name').show();\n      $('.quick-pull-branch-name input').prop('required', true);\n    } else {\n      $('.quick-pull-branch-name').hide();\n      $('.quick-pull-branch-name input').prop('required', false);\n    }\n    $('#commit-button').text($(this).attr('button_text'));\n  });\n\n  const $editFilename = $('#file-name');\n  $editFilename.keyup(function (e) {\n    const $section = $('.breadcrumb span.section');\n    const $divider = $('.breadcrumb div.divider');\n    let value;\n    let parts;\n\n    if (e.keyCode === 8) {\n      if ($(this).getCursorPosition() === 0) {\n        if ($section.length > 0) {\n          value = $section.last().find('a').text();\n          $(this).val(value + $(this).val());\n          $(this)[0].setSelectionRange(value.length, value.length);\n          $section.last().remove();\n          $divider.last().remove();\n        }\n      }\n    }\n    if (e.keyCode === 191) {\n      parts = $(this).val().split('/');\n      for (let i = 0; i < parts.length; ++i) {\n        value = parts[i];\n        if (i < parts.length - 1) {\n          if (value.length) {\n            $(`<span class=\"section\"><a href=\"#\">${value}</a></span>`).insertBefore($(this));\n            $('<div class=\"divider\"> / </div>').insertBefore($(this));\n          }\n        } else {\n          $(this).val(value);\n        }\n        $(this)[0].setSelectionRange(0, 0);\n      }\n    }\n    parts = [];\n    $('.breadcrumb span.section').each(function () {\n      const element = $(this);\n      if (element.find('a').length) {\n        parts.push(element.find('a').text());\n      } else {\n        parts.push(element.text());\n      }\n    });\n    if ($(this).val()) parts.push($(this).val());\n    $('#tree_path').val(parts.join('/'));\n  }).trigger('keyup');\n\n  const $editArea = $('.repository.editor textarea#edit_area');\n  if (!$editArea.length) return;\n\n  const markdownFileExts = $editArea.data('markdown-file-exts').split(',');\n  const lineWrapExtensions = $editArea.data('line-wrap-extensions').split(',');\n\n  $editFilename.on('keyup', () => {\n    const val = $editFilename.val();\n    let mode, spec, extension, extWithDot, dataUrl, apiCall;\n\n    extension = extWithDot = '';\n    const m = /.+\\.([^.]+)$/.exec(val);\n    if (m) {\n      extension = m[1];\n      extWithDot = `.${extension}`;\n    }\n\n    const info = CodeMirror.findModeByExtension(extension);\n    const previewLink = $('a[data-tab=preview]');\n    if (info) {\n      mode = info.mode;\n      spec = info.mime;\n      apiCall = mode;\n    } else {\n      apiCall = extension;\n    }\n\n    if (previewLink.length && apiCall && previewFileModes && previewFileModes.length && previewFileModes.indexOf(apiCall) >= 0) {\n      dataUrl = previewLink.data('url');\n      previewLink.data('url', dataUrl.replace(/(.*)\\/.*/i, `$1/${mode}`));\n      previewLink.show();\n    } else {\n      previewLink.hide();\n    }\n\n    // If this file is a Markdown extensions, we will load that editor and return\n    if (markdownFileExts.indexOf(extWithDot) >= 0) {\n      if (setSimpleMDE($editArea)) {\n        return;\n      }\n    }\n\n    // Else we are going to use CodeMirror\n    if (!codeMirrorEditor && !setCodeMirror($editArea)) {\n      return;\n    }\n\n    if (mode) {\n      codeMirrorEditor.setOption('mode', spec);\n      CodeMirror.autoLoadMode(codeMirrorEditor, mode);\n    }\n\n    if (lineWrapExtensions.indexOf(extWithDot) >= 0) {\n      codeMirrorEditor.setOption('lineWrapping', true);\n    } else {\n      codeMirrorEditor.setOption('lineWrapping', false);\n    }\n\n    // get the filename without any folder\n    let value = $editFilename.val();\n    if (value.length === 0) {\n      return;\n    }\n    value = value.split('/');\n    value = value[value.length - 1];\n\n    $.getJSON($editFilename.data('ec-url-prefix') + value, (editorconfig) => {\n      if (editorconfig.indent_style === 'tab') {\n        codeMirrorEditor.setOption('indentWithTabs', true);\n        codeMirrorEditor.setOption('extraKeys', {});\n      } else {\n        codeMirrorEditor.setOption('indentWithTabs', false);\n        // required because CodeMirror doesn't seems to use spaces correctly for {\"indentWithTabs\": false}:\n        // - https://github.com/codemirror/CodeMirror/issues/988\n        // - https://codemirror.net/doc/manual.html#keymaps\n        codeMirrorEditor.setOption('extraKeys', {\n          Tab(cm) {\n            const spaces = Array(parseInt(cm.getOption('indentUnit')) + 1).join(' ');\n            cm.replaceSelection(spaces);\n          }\n        });\n      }\n      codeMirrorEditor.setOption('indentUnit', editorconfig.indent_size || 4);\n      codeMirrorEditor.setOption('tabSize', editorconfig.tab_width || 4);\n    });\n  }).trigger('keyup');\n\n  // Using events from https://github.com/codedance/jquery.AreYouSure#advanced-usage\n  // to enable or disable the commit button\n  const $commitButton = $('#commit-button');\n  const $editForm = $('.ui.edit.form');\n  const dirtyFileClass = 'dirty-file';\n\n  // Disabling the button at the start\n  $commitButton.prop('disabled', true);\n\n  // Registering a custom listener for the file path and the file content\n  $editForm.areYouSure({\n    silent: true,\n    dirtyClass: dirtyFileClass,\n    fieldSelector: ':input:not(.commit-form-wrapper :input)',\n    change() {\n      const dirty = $(this).hasClass(dirtyFileClass);\n      $commitButton.prop('disabled', !dirty);\n    }\n  });\n\n  $commitButton.click((event) => {\n    // A modal which asks if an empty file should be committed\n    if ($editArea.val().length === 0) {\n      $('#edit-empty-content-modal').modal({\n        onApprove() {\n          $('.edit.form').submit();\n        }\n      }).modal('show');\n      event.preventDefault();\n    }\n  });\n}\n\nfunction initOrganization() {\n  if ($('.organization').length === 0) {\n    return;\n  }\n\n  // Options\n  if ($('.organization.settings.options').length > 0) {\n    $('#org_name').keyup(function () {\n      const $prompt = $('#org-name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('org-name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n  }\n}\n\nfunction initUserSettings() {\n  // Options\n  if ($('.user.settings.profile').length > 0) {\n    $('#username').keyup(function () {\n      const $prompt = $('#name-change-prompt');\n      if ($(this).val().toString().toLowerCase() !== $(this).data('name').toString().toLowerCase()) {\n        $prompt.show();\n      } else {\n        $prompt.hide();\n      }\n    });\n  }\n}\n\nfunction initGithook() {\n  if ($('.edit.githook').length === 0) {\n    return;\n  }\n\n  CodeMirror.autoLoadMode(CodeMirror.fromTextArea($('#content')[0], {\n    lineNumbers: true,\n    mode: 'shell'\n  }), 'shell');\n}\n\nfunction initWebhook() {\n  if ($('.new.webhook').length === 0) {\n    return;\n  }\n\n  $('.events.checkbox input').change(function () {\n    if ($(this).is(':checked')) {\n      $('.events.fields').show();\n    }\n  });\n  $('.non-events.checkbox input').change(function () {\n    if ($(this).is(':checked')) {\n      $('.events.fields').hide();\n    }\n  });\n\n  const updateContentType = function () {\n    const visible = $('#http_method').val() === 'POST';\n    $('#content_type').parent().parent()[visible ? 'show' : 'hide']();\n  };\n  updateContentType();\n  $('#http_method').change(() => {\n    updateContentType();\n  });\n\n  // Test delivery\n  $('#test-delivery').click(function () {\n    const $this = $(this);\n    $this.addClass('loading disabled');\n    $.post($this.data('link'), {\n      _csrf: csrf\n    }).done(\n      setTimeout(() => {\n        window.location.href = $this.data('redirect');\n      }, 5000)\n    );\n  });\n}\n\nfunction initAdmin() {\n  if ($('.admin').length === 0) {\n    return;\n  }\n\n  // New user\n  if ($('.admin.new.user').length > 0 || $('.admin.edit.user').length > 0) {\n    $('#login_type').change(function () {\n      if ($(this).val().substring(0, 1) === '0') {\n        $('#login_name').removeAttr('required');\n        $('.non-local').hide();\n        $('.local').show();\n        $('#user_name').focus();\n\n        if ($(this).data('password') === 'required') {\n          $('#password').attr('required', 'required');\n        }\n      } else {\n        $('#login_name').attr('required', 'required');\n        $('.non-local').show();\n        $('.local').hide();\n        $('#login_name').focus();\n\n        $('#password').removeAttr('required');\n      }\n    });\n  }\n\n  function onSecurityProtocolChange() {\n    if ($('#security_protocol').val() > 0) {\n      $('.has-tls').show();\n    } else {\n      $('.has-tls').hide();\n    }\n  }\n\n  function onUsePagedSearchChange() {\n    if ($('#use_paged_search').prop('checked')) {\n      $('.search-page-size').show()\n        .find('input').attr('required', 'required');\n    } else {\n      $('.search-page-size').hide()\n        .find('input').removeAttr('required');\n    }\n  }\n\n  function onOAuth2Change() {\n    $('.open_id_connect_auto_discovery_url, .oauth2_use_custom_url').hide();\n    $('.open_id_connect_auto_discovery_url input[required]').removeAttr('required');\n\n    const provider = $('#oauth2_provider').val();\n    switch (provider) {\n      case 'github':\n      case 'gitlab':\n      case 'gitea':\n        $('.oauth2_use_custom_url').show();\n        break;\n      case 'openidConnect':\n        $('.open_id_connect_auto_discovery_url input').attr('required', 'required');\n        $('.open_id_connect_auto_discovery_url').show();\n        break;\n    }\n    onOAuth2UseCustomURLChange();\n  }\n\n  function onOAuth2UseCustomURLChange() {\n    const provider = $('#oauth2_provider').val();\n    $('.oauth2_use_custom_url_field').hide();\n    $('.oauth2_use_custom_url_field input[required]').removeAttr('required');\n\n    if ($('#oauth2_use_custom_url').is(':checked')) {\n      if (!$('#oauth2_token_url').val()) {\n        $('#oauth2_token_url').val($(`#${provider}_token_url`).val());\n      }\n      if (!$('#oauth2_auth_url').val()) {\n        $('#oauth2_auth_url').val($(`#${provider}_auth_url`).val());\n      }\n      if (!$('#oauth2_profile_url').val()) {\n        $('#oauth2_profile_url').val($(`#${provider}_profile_url`).val());\n      }\n      if (!$('#oauth2_email_url').val()) {\n        $('#oauth2_email_url').val($(`#${provider}_email_url`).val());\n      }\n      switch (provider) {\n        case 'github':\n          $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input, .oauth2_email_url input').attr('required', 'required');\n          $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url, .oauth2_email_url').show();\n          break;\n        case 'gitea':\n        case 'gitlab':\n          $('.oauth2_token_url input, .oauth2_auth_url input, .oauth2_profile_url input').attr('required', 'required');\n          $('.oauth2_token_url, .oauth2_auth_url, .oauth2_profile_url').show();\n          $('#oauth2_email_url').val('');\n          break;\n      }\n    }\n  }\n\n  // New authentication\n  if ($('.admin.new.authentication').length > 0) {\n    $('#auth_type').change(function () {\n      $('.ldap, .dldap, .smtp, .pam, .oauth2, .has-tls .search-page-size').hide();\n\n      $('.ldap input[required], .binddnrequired input[required], .dldap input[required], .smtp input[required], .pam input[required], .oauth2 input[required], .has-tls input[required]').removeAttr('required');\n      $('.binddnrequired').removeClass('required');\n\n      const authType = $(this).val();\n      switch (authType) {\n        case '2': // LDAP\n          $('.ldap').show();\n          $('.binddnrequired input, .ldap div.required:not(.dldap) input').attr('required', 'required');\n          $('.binddnrequired').addClass('required');\n          break;\n        case '3': // SMTP\n          $('.smtp').show();\n          $('.has-tls').show();\n          $('.smtp div.required input, .has-tls').attr('required', 'required');\n          break;\n        case '4': // PAM\n          $('.pam').show();\n          $('.pam input').attr('required', 'required');\n          break;\n        case '5': // LDAP\n          $('.dldap').show();\n          $('.dldap div.required:not(.ldap) input').attr('required', 'required');\n          break;\n        case '6': // OAuth2\n          $('.oauth2').show();\n          $('.oauth2 div.required:not(.oauth2_use_custom_url,.oauth2_use_custom_url_field,.open_id_connect_auto_discovery_url) input').attr('required', 'required');\n          onOAuth2Change();\n          break;\n      }\n      if (authType === '2' || authType === '5') {\n        onSecurityProtocolChange();\n      }\n      if (authType === '2') {\n        onUsePagedSearchChange();\n      }\n    });\n    $('#auth_type').change();\n    $('#security_protocol').change(onSecurityProtocolChange);\n    $('#use_paged_search').change(onUsePagedSearchChange);\n    $('#oauth2_provider').change(onOAuth2Change);\n    $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n  }\n  // Edit authentication\n  if ($('.admin.edit.authentication').length > 0) {\n    const authType = $('#auth_type').val();\n    if (authType === '2' || authType === '5') {\n      $('#security_protocol').change(onSecurityProtocolChange);\n      if (authType === '2') {\n        $('#use_paged_search').change(onUsePagedSearchChange);\n      }\n    } else if (authType === '6') {\n      $('#oauth2_provider').change(onOAuth2Change);\n      $('#oauth2_use_custom_url').change(onOAuth2UseCustomURLChange);\n      onOAuth2Change();\n    }\n  }\n\n  // Notice\n  if ($('.admin.notice')) {\n    const $detailModal = $('#detail-modal');\n\n    // Attach view detail modals\n    $('.view-detail').click(function () {\n      $detailModal.find('.content p').text($(this).data('content'));\n      $detailModal.modal('show');\n      return false;\n    });\n\n    // Select actions\n    const $checkboxes = $('.select.table .ui.checkbox');\n    $('.select.action').click(function () {\n      switch ($(this).data('action')) {\n        case 'select-all':\n          $checkboxes.checkbox('check');\n          break;\n        case 'deselect-all':\n          $checkboxes.checkbox('uncheck');\n          break;\n        case 'inverse':\n          $checkboxes.checkbox('toggle');\n          break;\n      }\n    });\n    $('#delete-selection').click(function () {\n      const $this = $(this);\n      $this.addClass('loading disabled');\n      const ids = [];\n      $checkboxes.each(function () {\n        if ($(this).checkbox('is checked')) {\n          ids.push($(this).data('id'));\n        }\n      });\n      $.post($this.data('link'), {\n        _csrf: csrf,\n        ids\n      }).done(() => {\n        window.location.href = $this.data('redirect');\n      });\n    });\n  }\n}\n\nfunction buttonsClickOnEnter() {\n  $('.ui.button').keypress(function (e) {\n    if (e.keyCode === 13 || e.keyCode === 32) { // enter key or space bar\n      $(this).click();\n    }\n  });\n}\n\nfunction searchUsers() {\n  const $searchUserBox = $('#search-user-box');\n  $searchUserBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/users/search?q={query}`,\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          let title = item.login;\n          if (item.full_name && item.full_name.length > 0) {\n            title += ` (${htmlEncode(item.full_name)})`;\n          }\n          items.push({\n            title,\n            image: item.avatar_url\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['login', 'full_name'],\n    showNoResults: false\n  });\n}\n\nfunction searchTeams() {\n  const $searchTeamBox = $('#search-team-box');\n  $searchTeamBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/orgs/${$searchTeamBox.data('org')}/teams/search?q={query}`,\n      headers: { 'X-Csrf-Token': csrf },\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          const title = `${item.name} (${item.permission} access)`;\n          items.push({\n            title,\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['name', 'description'],\n    showNoResults: false\n  });\n}\n\nfunction searchRepositories() {\n  const $searchRepoBox = $('#search-repo-box');\n  $searchRepoBox.search({\n    minCharacters: 2,\n    apiSettings: {\n      url: `${suburl}/api/v1/repos/search?q={query}&uid=${$searchRepoBox.data('uid')}`,\n      onResponse(response) {\n        const items = [];\n        $.each(response.data, (_i, item) => {\n          items.push({\n            title: item.full_name.split('/')[1],\n            description: item.full_name\n          });\n        });\n\n        return { results: items };\n      }\n    },\n    searchFields: ['full_name'],\n    showNoResults: false\n  });\n}\n\nfunction initCodeView() {\n  if ($('.code-view .linenums').length > 0) {\n    $(document).on('click', '.lines-num span', function (e) {\n      const $select = $(this);\n      const $list = $select.parent().siblings('.lines-code').find('ol.linenums > li');\n      selectRange($list, $list.filter(`[rel=${$select.attr('id')}]`), (e.shiftKey ? $list.filter('.active').eq(0) : null));\n      deSelect();\n    });\n\n    $(window).on('hashchange', () => {\n      let m = window.location.hash.match(/^#(L\\d+)-(L\\d+)$/);\n      const $list = $('.code-view ol.linenums > li');\n      let $first;\n      if (m) {\n        $first = $list.filter(`.${m[1]}`);\n        selectRange($list, $first, $list.filter(`.${m[2]}`));\n        $('html, body').scrollTop($first.offset().top - 200);\n        return;\n      }\n      m = window.location.hash.match(/^#(L|n)(\\d+)$/);\n      if (m) {\n        $first = $list.filter(`.L${m[2]}`);\n        selectRange($list, $first);\n        $('html, body').scrollTop($first.offset().top - 200);\n      }\n    }).trigger('hashchange');\n  }\n  $('.ui.fold-code').on('click', (e) => {\n    const $foldButton = $(e.target);\n    if ($foldButton.hasClass('fa-chevron-down')) {\n      $(e.target).parent().next().slideUp('fast', () => {\n        $foldButton.removeClass('fa-chevron-down').addClass('fa-chevron-right');\n      });\n    } else {\n      $(e.target).parent().next().slideDown('fast', () => {\n        $foldButton.removeClass('fa-chevron-right').addClass('fa-chevron-down');\n      });\n    }\n  });\n  function insertBlobExcerpt(e) {\n    const $blob = $(e.target);\n    const $row = $blob.parent().parent();\n    $.get(`${$blob.data('url')}?${$blob.data('query')}&anchor=${$blob.data('anchor')}`, (blob) => {\n      $row.replaceWith(blob);\n      $(`[data-anchor=\"${$blob.data('anchor')}\"]`).on('click', (e) => { insertBlobExcerpt(e); });\n    });\n  }\n  $('.ui.blob-excerpt').on('click', (e) => { insertBlobExcerpt(e); });\n}\n\nfunction initU2FAuth() {\n  if ($('#wait-for-key').length === 0) {\n    return;\n  }\n  u2fApi.ensureSupport()\n    .then(() => {\n      $.getJSON(`${suburl}/user/u2f/challenge`).success((req) => {\n        u2fApi.sign(req.appId, req.challenge, req.registeredKeys, 30)\n          .then(u2fSigned)\n          .catch((err) => {\n            if (err === undefined) {\n              u2fError(1);\n              return;\n            }\n            u2fError(err.metaData.code);\n          });\n      });\n    }).catch(() => {\n      // Fallback in case browser do not support U2F\n      window.location.href = `${suburl}/user/two_factor`;\n    });\n}\nfunction u2fSigned(resp) {\n  $.ajax({\n    url: `${suburl}/user/u2f/sign`,\n    type: 'POST',\n    headers: { 'X-Csrf-Token': csrf },\n    data: JSON.stringify(resp),\n    contentType: 'application/json; charset=utf-8',\n  }).done((res) => {\n    window.location.replace(res);\n  }).fail(() => {\n    u2fError(1);\n  });\n}\n\nfunction u2fRegistered(resp) {\n  if (checkError(resp)) {\n    return;\n  }\n  $.ajax({\n    url: `${suburl}/user/settings/security/u2f/register`,\n    type: 'POST',\n    headers: { 'X-Csrf-Token': csrf },\n    data: JSON.stringify(resp),\n    contentType: 'application/json; charset=utf-8',\n    success() {\n      reload();\n    },\n    fail() {\n      u2fError(1);\n    }\n  });\n}\n\nfunction checkError(resp) {\n  if (!('errorCode' in resp)) {\n    return false;\n  }\n  if (resp.errorCode === 0) {\n    return false;\n  }\n  u2fError(resp.errorCode);\n  return true;\n}\n\n\nfunction u2fError(errorType) {\n  const u2fErrors = {\n    browser: $('#unsupported-browser'),\n    1: $('#u2f-error-1'),\n    2: $('#u2f-error-2'),\n    3: $('#u2f-error-3'),\n    4: $('#u2f-error-4'),\n    5: $('.u2f-error-5')\n  };\n  u2fErrors[errorType].removeClass('hide');\n\n  Object.keys(u2fErrors).forEach((type) => {\n    if (type !== errorType) {\n      u2fErrors[type].addClass('hide');\n    }\n  });\n  $('#u2f-error').modal('show');\n}\n\nfunction initU2FRegister() {\n  $('#register-device').modal({ allowMultiple: false });\n  $('#u2f-error').modal({ allowMultiple: false });\n  $('#register-security-key').on('click', (e) => {\n    e.preventDefault();\n    u2fApi.ensureSupport()\n      .then(u2fRegisterRequest)\n      .catch(() => {\n        u2fError('browser');\n      });\n  });\n}\n\nfunction u2fRegisterRequest() {\n  $.post(`${suburl}/user/settings/security/u2f/request_register`, {\n    _csrf: csrf,\n    name: $('#nickname').val()\n  }).success((req) => {\n    $('#nickname').closest('div.field').removeClass('error');\n    $('#register-device').modal('show');\n    if (req.registeredKeys === null) {\n      req.registeredKeys = [];\n    }\n    u2fApi.register(req.appId, req.registerRequests, req.registeredKeys, 30)\n      .then(u2fRegistered)\n      .catch((reason) => {\n        if (reason === undefined) {\n          u2fError(1);\n          return;\n        }\n        u2fError(reason.metaData.code);\n      });\n  }).fail((xhr) => {\n    if (xhr.status === 409) {\n      $('#nickname').closest('div.field').addClass('error');\n    }\n  });\n}\n\nfunction initWipTitle() {\n  $('.title_wip_desc > a').click((e) => {\n    e.preventDefault();\n\n    const $issueTitle = $('#issue_title');\n    $issueTitle.focus();\n    const value = $issueTitle.val().trim().toUpperCase();\n\n    for (const i in wipPrefixes) {\n      if (value.startsWith(wipPrefixes[i].toUpperCase())) {\n        return;\n      }\n    }\n\n    $issueTitle.val(`${wipPrefixes[0]} ${$issueTitle.val()}`);\n  });\n}\n\nfunction initTemplateSearch() {\n  const $repoTemplate = $('#repo_template');\n  const checkTemplate = function () {\n    const $templateUnits = $('#template_units');\n    const $nonTemplate = $('#non_template');\n    if ($repoTemplate.val() !== '') {\n      $templateUnits.show();\n      $nonTemplate.hide();\n    } else {\n      $templateUnits.hide();\n      $nonTemplate.show();\n    }\n  };\n  $repoTemplate.change(checkTemplate);\n  checkTemplate();\n\n  const changeOwner = function () {\n    $('#repo_template_search')\n      .dropdown({\n        apiSettings: {\n          url: `${suburl}/api/v1/repos/search?q={query}&template=true&priority_owner_id=${$('#uid').val()}`,\n          onResponse(response) {\n            const filteredResponse = { success: true, results: [] };\n            filteredResponse.results.push({\n              name: '',\n              value: ''\n            });\n            // Parse the response from the api to work with our dropdown\n            $.each(response.data, (_r, repo) => {\n              filteredResponse.results.push({\n                name: htmlEncode(repo.full_name),\n                value: repo.id\n              });\n            });\n            return filteredResponse;\n          },\n          cache: false,\n        },\n\n        fullTextSearch: true\n      });\n  };\n  $('#uid').change(changeOwner);\n  changeOwner();\n}\n\n$(document).ready(() => {\n  csrf = $('meta[name=_csrf]').attr('content');\n  suburl = $('meta[name=_suburl]').attr('content');\n\n  // Show exact time\n  $('.time-since').each(function () {\n    $(this)\n      .addClass('poping up')\n      .attr('data-content', $(this).attr('title'))\n      .attr('data-variation', 'inverted tiny')\n      .attr('title', '');\n  });\n\n  // Semantic UI modules.\n  $('.dropdown:not(.custom)').dropdown();\n  $('.jump.dropdown').dropdown({\n    action: 'hide',\n    onShow() {\n      $('.poping.up').popup('hide');\n    }\n  });\n  $('.slide.up.dropdown').dropdown({\n    transition: 'slide up'\n  });\n  $('.upward.dropdown').dropdown({\n    direction: 'upward'\n  });\n  $('.ui.accordion').accordion();\n  $('.ui.checkbox').checkbox();\n  $('.ui.progress').progress({\n    showActivity: false\n  });\n  $('.poping.up').popup();\n  $('.top.menu .poping.up').popup({\n    onShow() {\n      if ($('.top.menu .menu.transition').hasClass('visible')) {\n        return false;\n      }\n    }\n  });\n  $('.tabular.menu .item').tab();\n  $('.tabable.menu .item').tab();\n\n  $('.toggle.button').click(function () {\n    $($(this).data('target')).slideToggle(100);\n  });\n\n  // make table <tr> element clickable like a link\n  $('tr[data-href]').click(function () {\n    window.location = $(this).data('href');\n  });\n\n  // Highlight JS\n  if (typeof hljs !== 'undefined') {\n    const nodes = [].slice.call(document.querySelectorAll('pre code') || []);\n    for (let i = 0; i < nodes.length; i++) {\n      hljs.highlightBlock(nodes[i]);\n    }\n  }\n\n  // Dropzone\n  const $dropzone = $('#dropzone');\n  if ($dropzone.length > 0) {\n    const filenameDict = {};\n\n    new Dropzone('#dropzone', {\n      url: $dropzone.data('upload-url'),\n      headers: { 'X-Csrf-Token': csrf },\n      maxFiles: $dropzone.data('max-file'),\n      maxFilesize: $dropzone.data('max-size'),\n      acceptedFiles: ($dropzone.data('accepts') === '*/*') ? null : $dropzone.data('accepts'),\n      addRemoveLinks: true,\n      dictDefaultMessage: $dropzone.data('default-message'),\n      dictInvalidFileType: $dropzone.data('invalid-input-type'),\n      dictFileTooBig: $dropzone.data('file-too-big'),\n      dictRemoveFile: $dropzone.data('remove-file'),\n      init() {\n        this.on('success', (file, data) => {\n          filenameDict[file.name] = data.uuid;\n          const input = $(`<input id=\"${data.uuid}\" name=\"files\" type=\"hidden\">`).val(data.uuid);\n          $('.files').append(input);\n        });\n        this.on('removedfile', (file) => {\n          if (file.name in filenameDict) {\n            $(`#${filenameDict[file.name]}`).remove();\n          }\n          if ($dropzone.data('remove-url') && $dropzone.data('csrf')) {\n            $.post($dropzone.data('remove-url'), {\n              file: filenameDict[file.name],\n              _csrf: $dropzone.data('csrf')\n            });\n          }\n        });\n      },\n    });\n  }\n\n  // Emojify\n  emojify.setConfig({\n    img_dir: `${suburl}/vendor/plugins/emojify/images`,\n    ignore_emoticons: true\n  });\n  const hasEmoji = document.getElementsByClassName('has-emoji');\n  for (let i = 0; i < hasEmoji.length; i++) {\n    emojify.run(hasEmoji[i]);\n    for (let j = 0; j < hasEmoji[i].childNodes.length; j++) {\n      if (hasEmoji[i].childNodes[j].nodeName === 'A') {\n        emojify.run(hasEmoji[i].childNodes[j]);\n      }\n    }\n  }\n\n  // Clipboard JS\n  const clipboard = new Clipboard('.clipboard');\n  clipboard.on('success', (e) => {\n    e.clearSelection();\n\n    $(`#${e.trigger.getAttribute('id')}`).popup('destroy');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-success'));\n    $(`#${e.trigger.getAttribute('id')}`).popup('show');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'));\n  });\n\n  clipboard.on('error', (e) => {\n    $(`#${e.trigger.getAttribute('id')}`).popup('destroy');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-error'));\n    $(`#${e.trigger.getAttribute('id')}`).popup('show');\n    e.trigger.setAttribute('data-content', e.trigger.getAttribute('data-original'));\n  });\n\n  // Helpers.\n  $('.delete-button').click(showDeletePopup);\n  $('.add-all-button').click(showAddAllPopup);\n\n  $('.delete-branch-button').click(showDeletePopup);\n\n  $('.undo-button').click(function () {\n    const $this = $(this);\n    $.post($this.data('url'), {\n      _csrf: csrf,\n      id: $this.data('id')\n    }).done((data) => {\n      window.location.href = data.redirect;\n    });\n  });\n  $('.show-panel.button').click(function () {\n    $($(this).data('panel')).show();\n  });\n  $('.show-modal.button').click(function () {\n    $($(this).data('modal')).modal('show');\n  });\n  $('.delete-post.button').click(function () {\n    const $this = $(this);\n    $.post($this.data('request-url'), {\n      _csrf: csrf\n    }).done(() => {\n      window.location.href = $this.data('done-url');\n    });\n  });\n\n  // Set anchor.\n  $('.markdown').each(function () {\n    const headers = {};\n    $(this).find('h1, h2, h3, h4, h5, h6').each(function () {\n      let node = $(this);\n      const val = encodeURIComponent(node.text().toLowerCase().replace(/[^\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w\\- ]/g, '').replace(/[ ]/g, '-'));\n      let name = val;\n      if (headers[val] > 0) {\n        name = `${val}-${headers[val]}`;\n      }\n      if (headers[val] === undefined) {\n        headers[val] = 1;\n      } else {\n        headers[val] += 1;\n      }\n      node = node.wrap(`<div id=\"${name}\" class=\"anchor-wrap\" ></div>`);\n      node.append(`<a class=\"anchor\" href=\"#${name}\"><span class=\"octicon octicon-link\"></span></a>`);\n    });\n  });\n\n  $('.issue-checkbox').click(() => {\n    const numChecked = $('.issue-checkbox').children('input:checked').length;\n    if (numChecked > 0) {\n      $('#issue-filters').addClass('hide');\n      $('#issue-actions').removeClass('hide');\n    } else {\n      $('#issue-filters').removeClass('hide');\n      $('#issue-actions').addClass('hide');\n    }\n  });\n\n  $('.issue-action').click(function () {\n    let { action } = this.dataset;\n    let { elementId } = this.dataset;\n    const issueIDs = $('.issue-checkbox').children('input:checked').map(function () {\n      return this.dataset.issueId;\n    }).get().join();\n    const { url } = this.dataset;\n    if (elementId === '0' && url.substr(-9) === '/assignee') {\n      elementId = '';\n      action = 'clear';\n    }\n    updateIssuesMeta(url, action, issueIDs, elementId).then(() => {\n      // NOTICE: This reset of checkbox state targets Firefox caching behaviour, as the checkboxes stay checked after reload\n      if (action === 'close' || action === 'open') {\n        // uncheck all checkboxes\n        $('.issue-checkbox input[type=\"checkbox\"]').each((_, e) => { e.checked = false; });\n      }\n      reload();\n    });\n  });\n\n  // NOTICE: This event trigger targets Firefox caching behaviour, as the checkboxes stay checked after reload\n  // trigger ckecked event, if checkboxes are checked on load\n  $('.issue-checkbox input[type=\"checkbox\"]:checked').first().each((_, e) => {\n    e.checked = false;\n    $(e).click();\n  });\n\n  buttonsClickOnEnter();\n  searchUsers();\n  searchTeams();\n  searchRepositories();\n\n  initCommentForm();\n  initInstall();\n  initRepository();\n  initMigration();\n  initWikiForm();\n  initEditForm();\n  initEditor();\n  initOrganization();\n  initGithook();\n  initWebhook();\n  initAdmin();\n  initCodeView();\n  initVueApp();\n  initTeamSettings();\n  initCtrlEnterSubmit();\n  initNavbarContentToggle();\n  initTopicbar();\n  initU2FAuth();\n  initU2FRegister();\n  initIssueList();\n  initWipTitle();\n  initPullRequestReview();\n  initRepoStatusChecker();\n  initTemplateSearch();\n\n  // Repo clone url.\n  if ($('#repo-clone-url').length > 0) {\n    switch (localStorage.getItem('repo-clone-protocol')) {\n      case 'ssh':\n        if ($('#repo-clone-ssh').click().length === 0) {\n          $('#repo-clone-https').click();\n        }\n        break;\n      default:\n        $('#repo-clone-https').click();\n        break;\n    }\n  }\n\n  const routes = {\n    'div.user.settings': initUserSettings,\n    'div.repository.settings.collaboration': initRepositoryCollaboration\n  };\n\n  let selector;\n  for (selector in routes) {\n    if ($(selector).length > 0) {\n      routes[selector]();\n      break;\n    }\n  }\n\n  const $cloneAddr = $('#clone_addr');\n  $cloneAddr.change(() => {\n    const $repoName = $('#repo_name');\n    if ($cloneAddr.val().length > 0 && $repoName.val().length === 0) { // Only modify if repo_name input is blank\n      $repoName.val($cloneAddr.val().match(/^(.*\\/)?((.+?)(\\.git)?)$/)[3]);\n    }\n  });\n});\n\nfunction changeHash(hash) {\n  if (window.history.pushState) {\n    window.history.pushState(null, null, hash);\n  } else {\n    window.location.hash = hash;\n  }\n}\n\nfunction deSelect() {\n  if (window.getSelection) {\n    window.getSelection().removeAllRanges();\n  } else {\n    document.selection.empty();\n  }\n}\n\nfunction selectRange($list, $select, $from) {\n  $list.removeClass('active');\n  if ($from) {\n    let a = parseInt($select.attr('rel').substr(1));\n    let b = parseInt($from.attr('rel').substr(1));\n    let c;\n    if (a !== b) {\n      if (a > b) {\n        c = a;\n        a = b;\n        b = c;\n      }\n      const classes = [];\n      for (let i = a; i <= b; i++) {\n        classes.push(`.L${i}`);\n      }\n      $list.filter(classes.join(',')).addClass('active');\n      changeHash(`#L${a}-L${b}`);\n      return;\n    }\n  }\n  $select.addClass('active');\n  changeHash(`#${$select.attr('rel')}`);\n}\n\n$(() => {\n  // Warn users that try to leave a page after entering data into a form.\n  // Except on sign-in pages, and for forms marked as 'ignore-dirty'.\n  if ($('.user.signin').length === 0) {\n    $('form:not(.ignore-dirty)').areYouSure();\n  }\n\n  // Parse SSH Key\n  $('#ssh-key-content').on('change paste keyup', function () {\n    const arrays = $(this).val().split(' ');\n    const $title = $('#ssh-key-title');\n    if ($title.val() === '' && arrays.length === 3 && arrays[2] !== '') {\n      $title.val(arrays[2]);\n    }\n  });\n});\n\nfunction showDeletePopup() {\n  const $this = $(this);\n  let filter = '';\n  if ($this.attr('id')) {\n    filter += `#${$this.attr('id')}`;\n  }\n\n  const dialog = $(`.delete.modal${filter}`);\n  dialog.find('.name').text($this.data('name'));\n\n  dialog.modal({\n    closable: false,\n    onApprove() {\n      if ($this.data('type') === 'form') {\n        $($this.data('form')).submit();\n        return;\n      }\n\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        id: $this.data('id')\n      }).done((data) => {\n        window.location.href = data.redirect;\n      });\n    }\n  }).modal('show');\n  return false;\n}\n\nfunction showAddAllPopup() {\n  const $this = $(this);\n  let filter = '';\n  if ($this.attr('id')) {\n    filter += `#${$this.attr('id')}`;\n  }\n\n  const dialog = $(`.addall.modal${filter}`);\n  dialog.find('.name').text($this.data('name'));\n\n  dialog.modal({\n    closable: false,\n    onApprove() {\n      if ($this.data('type') === 'form') {\n        $($this.data('form')).submit();\n        return;\n      }\n\n      $.post($this.data('url'), {\n        _csrf: csrf,\n        id: $this.data('id')\n      }).done((data) => {\n        window.location.href = data.redirect;\n      });\n    }\n  }).modal('show');\n  return false;\n}\n\nfunction initVueComponents() {\n  const vueDelimeters = ['${', '}'];\n\n  Vue.component('repo-search', {\n    delimiters: vueDelimeters,\n\n    props: {\n      searchLimit: {\n        type: Number,\n        default: 10\n      },\n      suburl: {\n        type: String,\n        required: true\n      },\n      uid: {\n        type: Number,\n        required: true\n      },\n      organizations: {\n        type: Array,\n        default: []\n      },\n      isOrganization: {\n        type: Boolean,\n        default: true\n      },\n      canCreateOrganization: {\n        type: Boolean,\n        default: false\n      },\n      organizationsTotalCount: {\n        type: Number,\n        default: 0\n      },\n      moreReposLink: {\n        type: String,\n        default: ''\n      }\n    },\n\n    data() {\n      return {\n        tab: 'repos',\n        repos: [],\n        reposTotalCount: 0,\n        reposFilter: 'all',\n        searchQuery: '',\n        isLoading: false,\n        repoTypes: {\n          all: {\n            count: 0,\n            searchMode: '',\n          },\n          forks: {\n            count: 0,\n            searchMode: 'fork',\n          },\n          mirrors: {\n            count: 0,\n            searchMode: 'mirror',\n          },\n          sources: {\n            count: 0,\n            searchMode: 'source',\n          },\n          collaborative: {\n            count: 0,\n            searchMode: 'collaborative',\n          },\n        }\n      };\n    },\n\n    computed: {\n      showMoreReposLink() {\n        return this.repos.length > 0 && this.repos.length < this.repoTypes[this.reposFilter].count;\n      },\n      searchURL() {\n        return `${this.suburl}/api/v1/repos/search?sort=updated&order=desc&uid=${this.uid}&q=${this.searchQuery\n        }&limit=${this.searchLimit}&mode=${this.repoTypes[this.reposFilter].searchMode\n        }${this.reposFilter !== 'all' ? '&exclusive=1' : ''}`;\n      },\n      repoTypeCount() {\n        return this.repoTypes[this.reposFilter].count;\n      }\n    },\n\n    mounted() {\n      this.searchRepos(this.reposFilter);\n\n      const self = this;\n      Vue.nextTick(() => {\n        self.$refs.search.focus();\n      });\n    },\n\n    methods: {\n      changeTab(t) {\n        this.tab = t;\n      },\n\n      changeReposFilter(filter) {\n        this.reposFilter = filter;\n        this.repos = [];\n        this.repoTypes[filter].count = 0;\n        this.searchRepos(filter);\n      },\n\n      showRepo(repo, filter) {\n        switch (filter) {\n          case 'sources':\n            return repo.owner.id === this.uid && !repo.mirror && !repo.fork;\n          case 'forks':\n            return repo.owner.id === this.uid && !repo.mirror && repo.fork;\n          case 'mirrors':\n            return repo.mirror;\n          case 'collaborative':\n            return repo.owner.id !== this.uid && !repo.mirror;\n          default:\n            return true;\n        }\n      },\n\n      searchRepos(reposFilter) {\n        const self = this;\n\n        this.isLoading = true;\n\n        const searchedMode = this.repoTypes[reposFilter].searchMode;\n        const searchedURL = this.searchURL;\n        const searchedQuery = this.searchQuery;\n\n        $.getJSON(searchedURL, (result, _textStatus, request) => {\n          if (searchedURL === self.searchURL) {\n            self.repos = result.data;\n            const count = request.getResponseHeader('X-Total-Count');\n            if (searchedQuery === '' && searchedMode === '') {\n              self.reposTotalCount = count;\n            }\n            self.repoTypes[reposFilter].count = count;\n          }\n        }).always(() => {\n          if (searchedURL === self.searchURL) {\n            self.isLoading = false;\n          }\n        });\n      },\n\n      repoClass(repo) {\n        if (repo.fork) {\n          return 'octicon octicon-repo-forked';\n        } if (repo.mirror) {\n          return 'octicon octicon-repo-clone';\n        } if (repo.private) {\n          return 'octicon octicon-lock';\n        }\n        return 'octicon octicon-repo';\n      }\n    }\n  });\n}\n\nfunction initCtrlEnterSubmit() {\n  $('.js-quick-submit').keydown(function (e) {\n    if (((e.ctrlKey && !e.altKey) || e.metaKey) && (e.keyCode === 13 || e.keyCode === 10)) {\n      $(this).closest('form').submit();\n    }\n  });\n}\n\nfunction initVueApp() {\n  const el = document.getElementById('app');\n  if (!el) {\n    return;\n  }\n\n  initVueComponents();\n\n  new Vue({\n    delimiters: ['${', '}'],\n    el,\n    data: {\n      searchLimit: document.querySelector('meta[name=_search_limit]').content,\n      suburl: document.querySelector('meta[name=_suburl]').content,\n      uid: document.querySelector('meta[name=_context_uid]').content,\n    },\n  });\n}\n\nwindow.timeAddManual = function () {\n  $('.mini.modal')\n    .modal({\n      duration: 200,\n      onApprove() {\n        $('#add_time_manual_form').submit();\n      }\n    }).modal('show');\n};\n\nwindow.toggleStopwatch = function () {\n  $('#toggle_stopwatch_form').submit();\n};\nwindow.cancelStopwatch = function () {\n  $('#cancel_stopwatch_form').submit();\n};\n\nwindow.initHeatmap = function (appElementId, heatmapUser, locale) {\n  const el = document.getElementById(appElementId);\n  if (!el) {\n    return;\n  }\n\n  locale = locale || {};\n\n  locale.contributions = locale.contributions || 'contributions';\n  locale.no_contributions = locale.no_contributions || 'No contributions';\n\n  const vueDelimeters = ['${', '}'];\n\n  Vue.component('activity-heatmap', {\n    delimiters: vueDelimeters,\n\n    props: {\n      user: {\n        type: String,\n        required: true\n      },\n      suburl: {\n        type: String,\n        required: true\n      },\n      locale: {\n        type: Object,\n        required: true\n      }\n    },\n\n    data() {\n      return {\n        isLoading: true,\n        colorRange: [],\n        endDate: null,\n        values: [],\n        totalContributions: 0,\n      };\n    },\n\n    mounted() {\n      this.colorRange = [\n        this.getColor(0),\n        this.getColor(1),\n        this.getColor(2),\n        this.getColor(3),\n        this.getColor(4),\n        this.getColor(5)\n      ];\n      this.endDate = new Date();\n      this.loadHeatmap(this.user);\n    },\n\n    methods: {\n      loadHeatmap(userName) {\n        const self = this;\n        $.get(`${this.suburl}/api/v1/users/${userName}/heatmap`, (chartRawData) => {\n          const chartData = [];\n          for (let i = 0; i < chartRawData.length; i++) {\n            self.totalContributions += chartRawData[i].contributions;\n            chartData[i] = { date: new Date(chartRawData[i].timestamp * 1000), count: chartRawData[i].contributions };\n          }\n          self.values = chartData;\n          self.isLoading = false;\n        });\n      },\n\n      getColor(idx) {\n        const el = document.createElement('div');\n        el.className = `heatmap-color-${idx}`;\n        document.body.appendChild(el);\n\n        const color = getComputedStyle(el).backgroundColor;\n\n        document.body.removeChild(el);\n\n        return color;\n      }\n    },\n\n    template: '<div><div v-show=\"isLoading\"><slot name=\"loading\"></slot></div><h4 class=\"total-contributions\" v-if=\"!isLoading\"><span v-html=\"totalContributions\"></span> total contributions in the last 12 months</h4><calendar-heatmap v-show=\"!isLoading\" :locale=\"locale\" :no-data-text=\"locale.no_contributions\" :tooltip-unit=\"locale.contributions\" :end-date=\"endDate\" :values=\"values\" :range-color=\"colorRange\" />'\n  });\n\n  new Vue({\n    delimiters: vueDelimeters,\n    el,\n\n    data: {\n      suburl: document.querySelector('meta[name=_suburl]').content,\n      heatmapUser,\n      locale\n    },\n  });\n};\n\nfunction initFilterBranchTagDropdown(selector) {\n  $(selector).each(function () {\n    const $dropdown = $(this);\n    const $data = $dropdown.find('.data');\n    const data = {\n      items: [],\n      mode: $data.data('mode'),\n      searchTerm: '',\n      noResults: '',\n      canCreateBranch: false,\n      menuVisible: false,\n      active: 0\n    };\n    $data.find('.item').each(function () {\n      data.items.push({\n        name: $(this).text(),\n        url: $(this).data('url'),\n        branch: $(this).hasClass('branch'),\n        tag: $(this).hasClass('tag'),\n        selected: $(this).hasClass('selected')\n      });\n    });\n    $data.remove();\n    new Vue({\n      delimiters: ['${', '}'],\n      el: this,\n      data,\n\n      beforeMount() {\n        const vm = this;\n\n        this.noResults = vm.$el.getAttribute('data-no-results');\n        this.canCreateBranch = vm.$el.getAttribute('data-can-create-branch') === 'true';\n\n        document.body.addEventListener('click', (event) => {\n          if (vm.$el.contains(event.target)) {\n            return;\n          }\n          if (vm.menuVisible) {\n            Vue.set(vm, 'menuVisible', false);\n          }\n        });\n      },\n\n      watch: {\n        menuVisible(visible) {\n          if (visible) {\n            this.focusSearchField();\n          }\n        }\n      },\n\n      computed: {\n        filteredItems() {\n          const vm = this;\n\n          const items = vm.items.filter((item) => {\n            return ((vm.mode === 'branches' && item.branch) || (vm.mode === 'tags' && item.tag))\n              && (!vm.searchTerm || item.name.toLowerCase().indexOf(vm.searchTerm.toLowerCase()) >= 0);\n          });\n\n          vm.active = (items.length === 0 && vm.showCreateNewBranch ? 0 : -1);\n\n          return items;\n        },\n        showNoResults() {\n          return this.filteredItems.length === 0 && !this.showCreateNewBranch;\n        },\n        showCreateNewBranch() {\n          const vm = this;\n          if (!this.canCreateBranch || !vm.searchTerm || vm.mode === 'tags') {\n            return false;\n          }\n\n          return vm.items.filter((item) => item.name.toLowerCase() === vm.searchTerm.toLowerCase()).length === 0;\n        }\n      },\n\n      methods: {\n        selectItem(item) {\n          const prev = this.getSelected();\n          if (prev !== null) {\n            prev.selected = false;\n          }\n          item.selected = true;\n          window.location.href = item.url;\n        },\n        createNewBranch() {\n          if (!this.showCreateNewBranch) {\n            return;\n          }\n          this.$refs.newBranchForm.submit();\n        },\n        focusSearchField() {\n          const vm = this;\n          Vue.nextTick(() => {\n            vm.$refs.searchField.focus();\n          });\n        },\n        getSelected() {\n          for (let i = 0, j = this.items.length; i < j; ++i) {\n            if (this.items[i].selected) return this.items[i];\n          }\n          return null;\n        },\n        getSelectedIndexInFiltered() {\n          for (let i = 0, j = this.filteredItems.length; i < j; ++i) {\n            if (this.filteredItems[i].selected) return i;\n          }\n          return -1;\n        },\n        scrollToActive() {\n          let el = this.$refs[`listItem${this.active}`];\n          if (!el || el.length === 0) {\n            return;\n          }\n          if (Array.isArray(el)) {\n            el = el[0];\n          }\n\n          const cont = this.$refs.scrollContainer;\n\n          if (el.offsetTop < cont.scrollTop) {\n            cont.scrollTop = el.offsetTop;\n          } else if (el.offsetTop + el.clientHeight > cont.scrollTop + cont.clientHeight) {\n            cont.scrollTop = el.offsetTop + el.clientHeight - cont.clientHeight;\n          }\n        },\n        keydown(event) {\n          const vm = this;\n          if (event.keyCode === 40) {\n            // arrow down\n            event.preventDefault();\n\n            if (vm.active === -1) {\n              vm.active = vm.getSelectedIndexInFiltered();\n            }\n\n            if (vm.active + (vm.showCreateNewBranch ? 0 : 1) >= vm.filteredItems.length) {\n              return;\n            }\n            vm.active++;\n            vm.scrollToActive();\n          }\n          if (event.keyCode === 38) {\n            // arrow up\n            event.preventDefault();\n\n            if (vm.active === -1) {\n              vm.active = vm.getSelectedIndexInFiltered();\n            }\n\n            if (vm.active <= 0) {\n              return;\n            }\n            vm.active--;\n            vm.scrollToActive();\n          }\n          if (event.keyCode === 13) {\n            // enter\n            event.preventDefault();\n\n            if (vm.active >= vm.filteredItems.length) {\n              vm.createNewBranch();\n            } else if (vm.active >= 0) {\n              vm.selectItem(vm.filteredItems[vm.active]);\n            }\n          }\n          if (event.keyCode === 27) {\n            // escape\n            event.preventDefault();\n            vm.menuVisible = false;\n          }\n        }\n      }\n    });\n  });\n}\n\n$('.commit-button').click(function (e) {\n  e.preventDefault();\n  $(this).parent().find('.commit-body').toggle();\n});\n\nfunction initNavbarContentToggle() {\n  const content = $('#navbar');\n  const toggle = $('#navbar-expand-toggle');\n  let isExpanded = false;\n  toggle.click(() => {\n    isExpanded = !isExpanded;\n    if (isExpanded) {\n      content.addClass('shown');\n      toggle.addClass('active');\n    } else {\n      content.removeClass('shown');\n      toggle.removeClass('active');\n    }\n  });\n}\n\nfunction initTopicbar() {\n  const mgrBtn = $('#manage_topic');\n  const editDiv = $('#topic_edit');\n  const viewDiv = $('#repo-topics');\n  const saveBtn = $('#save_topic');\n  const topicDropdown = $('#topic_edit .dropdown');\n  const topicForm = $('#topic_edit.ui.form');\n  const topicPrompts = getPrompts();\n\n  mgrBtn.click(() => {\n    viewDiv.hide();\n    editDiv.css('display', ''); // show Semantic UI Grid\n  });\n\n  function getPrompts() {\n    const hidePrompt = $('div.hide#validate_prompt');\n    const prompts = {\n      countPrompt: hidePrompt.children('#count_prompt').text(),\n      formatPrompt: hidePrompt.children('#format_prompt').text()\n    };\n    hidePrompt.remove();\n    return prompts;\n  }\n\n  saveBtn.click(() => {\n    const topics = $('input[name=topics]').val();\n\n    $.post(saveBtn.data('link'), {\n      _csrf: csrf,\n      topics\n    }, (_data, _textStatus, xhr) => {\n      if (xhr.responseJSON.status === 'ok') {\n        viewDiv.children('.topic').remove();\n        if (topics.length) {\n          const topicArray = topics.split(',');\n\n          const last = viewDiv.children('a').last();\n          for (let i = 0; i < topicArray.length; i++) {\n            $(`<div class=\"ui small label topic\" style=\"cursor:pointer;\">${topicArray[i]}</div>`).insertBefore(last);\n          }\n        }\n        editDiv.css('display', 'none');\n        viewDiv.show();\n      }\n    }).fail((xhr) => {\n      if (xhr.status === 422) {\n        if (xhr.responseJSON.invalidTopics.length > 0) {\n          topicPrompts.formatPrompt = xhr.responseJSON.message;\n\n          const { invalidTopics } = xhr.responseJSON;\n          const topicLables = topicDropdown.children('a.ui.label');\n\n          topics.split(',').forEach((value, index) => {\n            for (let i = 0; i < invalidTopics.length; i++) {\n              if (invalidTopics[i] === value) {\n                topicLables.eq(index).removeClass('green').addClass('red');\n              }\n            }\n          });\n        } else {\n          topicPrompts.countPrompt = xhr.responseJSON.message;\n        }\n      }\n    }).always(() => {\n      topicForm.form('validate form');\n    });\n  });\n\n  topicDropdown.dropdown({\n    allowAdditions: true,\n    forceSelection: false,\n    fields: { name: 'description', value: 'data-value' },\n    saveRemoteData: false,\n    label: {\n      transition: 'horizontal flip',\n      duration: 200,\n      variation: false,\n      blue: true,\n      basic: true,\n    },\n    className: {\n      label: 'ui small label'\n    },\n    apiSettings: {\n      url: `${suburl}/api/v1/topics/search?q={query}`,\n      throttle: 500,\n      cache: false,\n      onResponse(res) {\n        const formattedResponse = {\n          success: false,\n          results: [],\n        };\n        const stripTags = function (text) {\n          return text.replace(/<[^>]*>?/gm, '');\n        };\n\n        const query = stripTags(this.urlData.query.trim());\n        let found_query = false;\n        const current_topics = [];\n        topicDropdown.find('div.label.visible.topic,a.label.visible').each((_, e) => { current_topics.push(e.dataset.value); });\n\n        if (res.topics) {\n          let found = false;\n          for (let i = 0; i < res.topics.length; i++) {\n            // skip currently added tags\n            if (current_topics.indexOf(res.topics[i].topic_name) !== -1) {\n              continue;\n            }\n\n            if (res.topics[i].topic_name.toLowerCase() === query.toLowerCase()) {\n              found_query = true;\n            }\n            formattedResponse.results.push({ description: res.topics[i].topic_name, 'data-value': res.topics[i].topic_name });\n            found = true;\n          }\n          formattedResponse.success = found;\n        }\n\n        if (query.length > 0 && !found_query) {\n          formattedResponse.success = true;\n          formattedResponse.results.unshift({ description: query, 'data-value': query });\n        } else if (query.length > 0 && found_query) {\n          formattedResponse.results.sort((a, b) => {\n            if (a.description.toLowerCase() === query.toLowerCase()) return -1;\n            if (b.description.toLowerCase() === query.toLowerCase()) return 1;\n            if (a.description > b.description) return -1;\n            if (a.description < b.description) return 1;\n            return 0;\n          });\n        }\n\n\n        return formattedResponse;\n      },\n    },\n    onLabelCreate(value) {\n      value = value.toLowerCase().trim();\n      this.attr('data-value', value).contents().first().replaceWith(value);\n      return $(this);\n    },\n    onAdd(addedValue, _addedText, $addedChoice) {\n      addedValue = addedValue.toLowerCase().trim();\n      $($addedChoice).attr('data-value', addedValue);\n      $($addedChoice).attr('data-text', addedValue);\n    }\n  });\n\n  $.fn.form.settings.rules.validateTopic = function (_values, regExp) {\n    const topics = topicDropdown.children('a.ui.label');\n    const status = topics.length === 0 || topics.last().attr('data-value').match(regExp);\n    if (!status) {\n      topics.last().removeClass('green').addClass('red');\n    }\n    return status && topicDropdown.children('a.ui.label.red').length === 0;\n  };\n\n  topicForm.form({\n    on: 'change',\n    inline: true,\n    fields: {\n      topics: {\n        identifier: 'topics',\n        rules: [\n          {\n            type: 'validateTopic',\n            value: /^[a-z0-9][a-z0-9-]{1,35}$/,\n            prompt: topicPrompts.formatPrompt\n          },\n          {\n            type: 'maxCount[25]',\n            prompt: topicPrompts.countPrompt\n          }\n        ]\n      },\n    }\n  });\n}\n\nwindow.toggleDeadlineForm = function () {\n  $('#deadlineForm').fadeToggle(150);\n};\n\nwindow.setDeadline = function () {\n  const deadline = $('#deadlineDate').val();\n  window.updateDeadline(deadline);\n};\n\nwindow.updateDeadline = function (deadlineString) {\n  $('#deadline-err-invalid-date').hide();\n  $('#deadline-loader').addClass('loading');\n\n  let realDeadline = null;\n  if (deadlineString !== '') {\n    const newDate = Date.parse(deadlineString);\n\n    if (Number.isNaN(newDate)) {\n      $('#deadline-loader').removeClass('loading');\n      $('#deadline-err-invalid-date').show();\n      return false;\n    }\n    realDeadline = new Date(newDate);\n  }\n\n  $.ajax(`${$('#update-issue-deadline-form').attr('action')}/deadline`, {\n    data: JSON.stringify({\n      due_date: realDeadline,\n    }),\n    headers: {\n      'X-Csrf-Token': csrf,\n      'X-Remote': true,\n    },\n    contentType: 'application/json',\n    type: 'POST',\n    success() {\n      reload();\n    },\n    error() {\n      $('#deadline-loader').removeClass('loading');\n      $('#deadline-err-invalid-date').show();\n    }\n  });\n};\n\nwindow.deleteDependencyModal = function (id, type) {\n  $('.remove-dependency')\n    .modal({\n      closable: false,\n      duration: 200,\n      onApprove() {\n        $('#removeDependencyID').val(id);\n        $('#dependencyType').val(type);\n        $('#removeDependencyForm').submit();\n      }\n    }).modal('show');\n};\n\nfunction initIssueList() {\n  const repolink = $('#repolink').val();\n  const repoId = $('#repoId').val();\n  const crossRepoSearch = $('#crossRepoSearch').val();\n  let issueSearchUrl = `${suburl}/api/v1/repos/${repolink}/issues?q={query}`;\n  if (crossRepoSearch === 'true') {\n    issueSearchUrl = `${suburl}/api/v1/repos/issues/search?q={query}&priority_repo_id=${repoId}`;\n  }\n  $('#new-dependency-drop-list')\n    .dropdown({\n      apiSettings: {\n        url: issueSearchUrl,\n        onResponse(response) {\n          const filteredResponse = { success: true, results: [] };\n          const currIssueId = $('#new-dependency-drop-list').data('issue-id');\n          // Parse the response from the api to work with our dropdown\n          $.each(response, (_i, issue) => {\n            // Don't list current issue in the dependency list.\n            if (issue.id === currIssueId) {\n              return;\n            }\n            filteredResponse.results.push({\n              name: `#${issue.number} ${htmlEncode(issue.title)\n              }<div class=\"text small dont-break-out\">${htmlEncode(issue.repository.full_name)}</div>`,\n              value: issue.id\n            });\n          });\n          return filteredResponse;\n        },\n        cache: false,\n      },\n\n      fullTextSearch: true\n    });\n\n  $('.menu a.label-filter-item').each(function () {\n    $(this).click(function (e) {\n      if (e.altKey) {\n        e.preventDefault();\n\n        const href = $(this).attr('href');\n        const id = $(this).data('label-id');\n\n        const regStr = `labels=(-?[0-9]+%2c)*(${id})(%2c-?[0-9]+)*&`;\n        const newStr = 'labels=$1-$2$3&';\n\n        window.location = href.replace(new RegExp(regStr), newStr);\n      }\n    });\n  });\n\n  $('.menu .ui.dropdown.label-filter').keydown((e) => {\n    if (e.altKey && e.keyCode === 13) {\n      const selectedItems = $('.menu .ui.dropdown.label-filter .menu .item.selected');\n\n      if (selectedItems.length > 0) {\n        const item = $(selectedItems[0]);\n\n        const href = item.attr('href');\n        const id = item.data('label-id');\n\n        const regStr = `labels=(-?[0-9]+%2c)*(${id})(%2c-?[0-9]+)*&`;\n        const newStr = 'labels=$1-$2$3&';\n\n        window.location = href.replace(new RegExp(regStr), newStr);\n      }\n    }\n  });\n}\nwindow.cancelCodeComment = function (btn) {\n  const form = $(btn).closest('form');\n  if (form.length > 0 && form.hasClass('comment-form')) {\n    form.addClass('hide');\n    form.parent().find('button.comment-form-reply').show();\n  } else {\n    form.closest('.comment-code-cloud').remove();\n  }\n};\nwindow.onOAuthLoginClick = function () {\n  const oauthLoader = $('#oauth2-login-loader');\n  const oauthNav = $('#oauth2-login-navigator');\n\n  oauthNav.hide();\n  oauthLoader.removeClass('disabled');\n\n  setTimeout(() => {\n    // recover previous content to let user try again\n    // usually redirection will be performed before this action\n    oauthLoader.addClass('disabled');\n    oauthNav.show();\n  }, 5000);\n};\n(function () {\n  // html listings ----------------------------------------------------\n  let openedLists, listEopen;\n  // close list\n  const closeList = function (count) {\n    let out = '';\n    if (count === false || count === 0 || count === 'undefined' || typeof (count) === 'undefined') {\n      count = openedLists.length;\n    } else {\n      count = Math.min(count, openedLists.length);\n    }\n    while (count > 0) {\n      out += `</li>${openedLists.pop()}`;\n      listEopen = true;\n      count--;\n    }\n    return out;\n  };\n  // open list\n  const openList = function () {\n    const out = '<ul>';\n    openedLists.push('</ul>');\n    listEopen = false;\n    return out;\n  };\n  // handle list element\n  // create valid html list\n  const recursive_list = function (line, level, id) {\n    let out = '';\n    const diff = level - openedLists.length;\n    if (diff > 0) { // open new level\n      out += openList();\n      out += recursive_list(line, level, id);\n    } else if (diff < 0) {\n      out += closeList(-diff);\n      out += recursive_list(line, level, id);\n    } else { // only add list element\n      out += `${listEopen ? '</li>' : ''}<li><a href=\"#${id}\" rel=\"nofollow\">${line}</a>`;\n      listEopen = true;\n    }\n    return out;\n  };\n  /**\n   * find headlines and create list ----------------------------------\n   * @param target Element target container where toc should be created\n   */\n  const create_toc_inside = function (target) {\n    let rm;\n    if (target != null) {\n      rm = target.querySelector('.auto-toc-wrapper');\n      if (rm != null) {\n        rm.parentNode.removeChild(rm);\n      }\n      // remove optional toc flag\n      const ps = target.querySelectorAll('p');\n      // look for toc keywoard\n      for (let i = 0; i < ps.length; i++) {\n        if (ps[i].textContent.trim() === '%%TOC%%') {\n          ps[i].parentNode.removeChild(ps[i]);\n        }\n      }\n      openedLists = []; listEopen = false;\n      // get content and create html\n      const elms = target.querySelectorAll('h1,h2,h3,h4,h5');\n      if (elms.length > 0) {\n        let html = '';\n        for (let i = 0; i < elms.length; i++) {\n          const l = elms[i].tagName.substr(1); // level\n          const t = elms[i].innerText.trim().trim(''); // text\n          const id = elms[i].id;\n          // create html\n          if (t.length > 0 && l >= 1) {\n            html += recursive_list(t, l, id);\n          } else {\n            html += closeList(0);\n          }\n        }\n        html += closeList(0);\n        // create elements\n        const d = document.createElement('div');\n        d.id = 'auto-toc';\n        d.className = 'anchor-wrap';\n        // d.innerHTML = '<h2>'+((typeof(target.dataset.toc) == 'string' && target.dataset.toc != '')?target.dataset.toc:'Table of Contents')+'</h2>';\n        d.innerHTML = `<h2>${(typeof (target.dataset.toc) === 'string' && target.dataset.toc !== '') ? target.dataset.toc : 'Table of Contents'}</h2>`;\n        const d2 = document.createElement('div');\n        d2.className = 'auto-toc-container';\n        d2.innerHTML = html;\n        d2.insertBefore(d, d2.firstChild);\n        const c = document.createElement('div');\n        c.className = 'auto-toc-wrapper';\n        c.appendChild(d2);\n        // inject toc\n        target.insertBefore(c, target.firstChild);\n        rm = document.querySelector('.auto-toc-clear');\n        if (rm != null) {\n          rm.parentNode.removeChild(rm);\n        }\n        const a = document.createElement('div'); a.className = 'auto-toc-clear';\n        target.appendChild(a);\n      }\n    }\n  };\n  /**\n   * search for %%TOC%% inside document if found create toc --------------------------\n   * @param target Element target container where toc should be created\n   */\n  const detect_toc_flag = function (target) {\n    if (target != null) {\n      const ps = target.querySelectorAll('p');\n      let found = false;\n      // look for toc keywoard\n      for (let i = 0; i < ps.length; i++) {\n        if (ps[i].textContent.trim() === '%%TOC%%') {\n          found = ps[i];\n          break;\n        }\n      }\n      if (found !== false) {\n        // remove toc keywoard\n        found.parentNode.removeChild(found);\n        // create toc\n        create_toc_inside(target);\n      }\n    }\n  };\n  // create toc ----------------------------------\n  window.addEventListener('load', () => {\n    create_toc_inside(document.querySelector('.file-view.markdown.auto-toc')); // md\n    detect_toc_flag(document.querySelector('.file-view.markdown.auto-toc-by-flag')); // md by %%TOC%% flag\n    create_toc_inside(document.querySelector('.segment.markdown.auto-toc')); // wiki pages\n  });\n}());\n","/* globals gitGraph */\n\n$(() => {\n  const graphList = [];\n\n  if (!document.getElementById('graph-canvas')) {\n    return;\n  }\n\n  $('#graph-raw-list li span.node-relation').each(function () {\n    graphList.push($(this).text());\n  });\n\n  gitGraph(document.getElementById('graph-canvas'), graphList);\n});\n"],"sourceRoot":""}